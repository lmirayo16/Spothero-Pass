!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d77ca418-f3f1-43c7-bb02-7851b31dd5ed",e._sentryDebugIdIdentifier="sentry-dbid-d77ca418-f3f1-43c7-bb02-7851b31dd5ed")}catch(e){}}();var _sentryModuleMetadataGlobal="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_sentryModuleMetadataGlobal._sentryModuleMetadata=_sentryModuleMetadataGlobal._sentryModuleMetadata||{},_sentryModuleMetadataGlobal._sentryModuleMetadata[(new _sentryModuleMetadataGlobal.Error).stack]=Object.assign({},_sentryModuleMetadataGlobal._sentryModuleMetadata[(new _sentryModuleMetadataGlobal.Error).stack],{"_sentryBundlerPluginAppKey:sh-consumer-checkout-key":!0}),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2878:function(e,t,r){"use strict";r.d(t,{M:function(){return f}});var n=r(82917),i=r(18922),o=r(52983),a=r(24406),s=r(2819),l=r(30278),c=r(60837),d=r(97458);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={SINGLE:"single",MEDIUM:"medium",WIDE:"wide"},p={display:"flex",justifyContent:"center",alignItems:"center",width:"70%",height:"65%",background:"white",borderRadius:"2xl"};t.Z=function(e){var t=e.images,r=e.height,n=e.width,u=e.isLoading,m=e.variant,g=void 0===m?f.SINGLE:m,v=e.reinitialize,x=void 0!==v&&v,b=n?"".concat(n,"rem"):"100%",y="".concat(r,"rem"),j=(0,a.Fg)(),O=j.colors,w=j.shadows,C=Object.values(f).includes(g)?g:f.SINGLE,k=C===f.WIDE,P=C===f.MEDIUM,S=C===f.SINGLE,T=k?"36%":P?"75%":"100%",D=k?6:P?2:0,I=S?"0":"1rem",_={background:"gray.200",borderRadius:S?"0":"2xl",display:"flex",justifyContent:"center",alignItems:"center"},E=(0,o.useMemo)((function(){return{skipSnaps:!1,loop:!0,slidesToScroll:1,align:S?"center":"start"}}),[S]),R=(0,s.Z)(E),z=(0,i.Z)(R,2),A=z[0],M=z[1],N=(0,o.useState)(0),F=N[0],B=N[1],Z=(0,o.useCallback)((function(){return M&&M.scrollPrev()}),[M]),V=(0,o.useCallback)((function(){return M&&M.scrollNext()}),[M]),H=(0,o.useCallback)((function(){M&&B(M.selectedScrollSnap())}),[M,B]);if((0,o.useEffect)((function(){M&&(H(),M.on("select",H))}),[M,H]),(0,o.useEffect)((function(){x&&M&&M.reInit(E)}),[M,E,x]),u)return(0,d.jsx)(c.Z,{height:y,width:b});if(1===t.length){var W=t[0];return W.isLogo?(0,d.jsx)(a.xu,h(h({width:T},_),{},{height:y,children:(0,d.jsx)(a.xu,h(h({},p),{},{children:(0,d.jsx)(a.Ee,{borderRadius:I,objectFit:"cover",width:"50%",src:W.src,alt:W.alt})}))})):(0,d.jsx)(a.xu,{width:b,height:y,children:(0,d.jsx)(a.Ee,{width:T,borderRadius:I,height:"100%",objectFit:"cover",src:W.src,alt:W.alt})})}return(0,d.jsxs)(a.xu,{as:"section",position:"relative",overflow:"hidden",width:b,borderRadius:I,"data-testid":"ImageCarousel",children:[(0,d.jsx)(a.xu,{ref:A,children:(0,d.jsx)(a.xu,{display:"flex",role:"group",children:t.map((function(e,r){return(0,d.jsx)(a.xu,h(h({position:"relative",flex:"0 0 ".concat(T),marginRight:k&&3===t.length&&r===t.length-1?0:D,"aria-label":"Slide ".concat(r+1," of ").concat(t.length)},e.isLogo&&_),{},{children:(0,d.jsxs)(a.xu,h(h({position:"relative",height:y},e.isLogo&&p),{},{"data-testid":"ImageCarousel-imagecontainer",children:[(0,d.jsx)(a.Ee,{borderRadius:I,width:e.isLogo?"50%":"100%",height:!e.isLogo&&"100%",objectFit:"cover",src:e.src,alt:e.alt}),S?null:(0,d.jsxs)(a.xu,{color:"white",borderRadius:"1rem",bgColor:"black",opacity:"0.6",paddingX:3,paddingY:1,fontSize:"xs",position:"absolute",top:3,right:3,children:[r+1,"/",t.length]})]}))}),r)}))})}),(0,d.jsx)(a.zx,{onClick:Z,width:"16",height:"100%",position:"absolute",left:"0",top:"0",bg:"none",borderRadius:"0",border:"0",_hover:{bg:S?"none":"linear-gradient(90deg, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.318944) 20.83%, rgba(0, 0, 0, 0.204399) 41.67%, rgba(0, 0, 0, 0.0807292) 72.4%, rgba(0, 0, 0, 0) 100%);",border:0},background:"none",_focus:{boxShadow:"none"},_focusVisible:{">div":{border:"2px solid ".concat(O.gray[50]),boxShadow:w.outline}},padding:"3",children:(0,d.jsx)(a.xu,{border:"2px solid rgba(0,0,0,0.6)",padding:2,borderRadius:"50%",bgColor:"black",opacity:"0.6",children:(0,d.jsx)(a.JO,{as:l.s$,width:6,height:"auto",color:"white"})})}),(0,d.jsx)(a.zx,{onClick:V,width:"16",height:"100%",position:"absolute",right:"0",top:"0",bg:"none",borderRadius:"0",border:"0",_hover:{bg:S?"none":"linear-gradient(270deg, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.318944) 20.83%, rgba(0, 0, 0, 0.204399) 41.67%, rgba(0, 0, 0, 0.0807292) 72.4%, rgba(0, 0, 0, 0) 100%);",border:0},background:S?"none":"linear-gradient(270deg, rgba(255, 255, 255, 0.83) 0%, rgba(255, 255, 255, 0.637889) 14.49%, rgba(255, 255, 255, 0.408798) 28.97%, rgba(255, 255, 255, 0.161458) 50.34%, rgba(255, 255, 255, 0) 69.53%)",_focus:{boxShadow:"none"},_focusVisible:{">div":{border:"2px solid ".concat(O.gray[50]),boxShadow:w.outline}},padding:"3",children:(0,d.jsx)(a.xu,{borderRadius:"50%",bgColor:"black",opacity:"0.6",border:"2px solid rgba(0,0,0,0.6)",padding:2,children:(0,d.jsx)(a.JO,{as:l._Q,width:6,height:"auto",color:"white"})})}),S&&(0,d.jsxs)(a.xu,{color:"white",borderRadius:"1rem",bgColor:"black",opacity:"0.6",paddingX:3,paddingY:1,fontSize:"xs",position:"absolute",bottom:3,left:"50%",transform:"translateX(-50%)",children:[F+1,"/",t.length]})]})}},87298:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var n=r(37705),i=r(82917),o=r(88002),a=r.n(o),s=r(52983),l=r(24406),c=r(30278),d=r(27789),u=r(39450),h=r(15261),f=r(12139),p=r(97458);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v="phone",x=function(e){var t=e.rentalId,r=e.rentalPhone,o=e.accessKey,m=e.isOpen,x=e.onClose,b=(0,d.cI)({defaultValues:(0,i.Z)({},v,r||"")}),y=b.handleSubmit,j=b.reset,O=b.resetField,w=(0,u.Do)(),C=w.mutate,k=w.isLoading,P=(0,s.useState)(null),S=P[0],T=P[1],D=(0,s.useState)(null),I=D[0],_=D[1],E=function(){setTimeout((function(){j(),T(null),_(null)}),100),x()},R=function(){var e=(0,n.Z)(a().mark((function e(r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.phone,T(!1),e.next=4,C({phoneNumber:n,reservationId:t,accessKey:o},{onSuccess:function(){_(n),O(v,{defaultValue:n})},onError:function(){T(!0)}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsx)(l.u_,{hasHeader:!I,hasFooter:!0,size:"sm",isOpen:m,onClose:E,children:I?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.fe,{children:(0,p.jsxs)(l.kC,{alignItems:"center",flexDirection:"column",width:"100%",textAlign:"center",children:[(0,p.jsx)(l.JO,{as:c.MC,color:"green.default",width:28,height:28,marginTop:"-2rem"}),(0,p.jsx)(l.xv,{fontSize:"lg",fontWeight:"semibold",marginBottom:2,children:"Parking pass is texted to you"}),(0,p.jsxs)(l.xv,{children:["We sent your parking pass to"," ",(0,h.un)(I)]})]})}),(0,p.jsx)(l.mz,{children:(0,p.jsx)(l.zx,{onClick:E,variant:"primary",fontFamily:"body","data-testid":"TextMePassModal-ok-button",width:"100%",children:"Okay"})})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.xB,{fontSize:"lg",children:"Text me my mobile Parking Pass"}),(0,p.jsx)(l.fe,{children:(0,p.jsxs)(l.kC,{width:"100%",flexDirection:"column","data-testid":"TextMePassModal",children:[(0,p.jsx)(d.RV,g(g({},b),{},{children:(0,p.jsx)("form",{onSubmit:y(R),id:"text-pass-form",children:(0,p.jsx)(f.Z,{isDisabled:k,fieldName:v,inputStyles:{"data-testid":"TextMePassModal-phone-input"}})})})),!S&&(0,p.jsx)(l.xv,{marginTop:3,children:"This request will generate a one-time text message to the phone number listed above"}),S?(0,p.jsx)(l.bZ,{marginTop:4,status:"error",title:"Oops, we hit a snag saving your phone number. Please try again."}):null]})}),(0,p.jsxs)(l.mz,{children:[(0,p.jsx)(l.zx,{onClick:E,variant:"secondary",marginRight:4,fontFamily:"body",disabled:k,"data-testid":"TextMePassModal-cancel-button",children:"Cancel"}),(0,p.jsx)(l.zx,{form:"text-pass-form",type:"submit",variant:"primary",fontFamily:"body",disabled:k,"data-testid":"TextMePassModal-send-button",children:"Send"})]})]})})}},25834:function(e,t,r){"use strict";r.d(t,{Z:function(){return n.Z}});var n=r(51258)},88796:function(e,t,r){"use strict";r.d(t,{L:function(){return c}});var n=r(37705),i=r(88002),o=r.n(i),a=r(78265),s=r(49838),l=r(3265),c=function(){(0,s.NL)();return(0,l.D)({mutationFn:function(){var e=(0,n.Z)(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,n=t.formVals,e.abrupt("return",(0,a.Wg)({userId:r,formVals:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}},32763:function(e,t,r){"use strict";r.d(t,{k:function(){return d},l:function(){return u}});var n=r(37705),i=r(88002),o=r.n(i),a=r(17957),s=r(30379),l=function(e){var t,r=s.default.camelizeKeys(e),n=r.available,i=r.starts,o=r.ends,a=r.originalRental,l=r.priceBreakdown;return{available:n,starts:i,ends:o,currency:(null===l||void 0===l||null===(t=l.currencyType)||void 0===t?void 0:t.toUpperCase())||"",originalPrice:a.price,originalAmountCharged:a.amountCharged,originalDiscountAmount:a.discountAmount,originalCreditUsed:a.spotheroCreditUsed,newTotalPrice:(null===l||void 0===l?void 0:l.price)||0,priceDifference:null!==l&&void 0!==l&&l.price?l.price-a.price:0,chargeAmount:null===l||void 0===l?void 0:l.chargeAmount,refundAmount:null===l||void 0===l?void 0:l.refundAmount}},c=r(48765),d=function(){var e=(0,n.Z)(o().mark((function e(t){var r,n,i,s,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.reservationId,n=t.startTimestamp,i=t.endTimestamp,s=t.accessKey,e.next=3,a.T.get("reservations/".concat(r,"/rate-diff/?access_key=").concat(s),{params:{segment_id:c.ZP.getAnonymousId(),mixpanel_id:c.ZP.getAnonymousId(),ends:i,starts:n}});case 3:return d=e.sent,e.abrupt("return",l(d.data.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,n.Z)(o().mark((function e(t){var r,n,i,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.reservationId,n=t.accessKey,i=t.vehicleProfileId,s=t.vehicleInfoId,e.next=3,a.T.get("reservations/".concat(r,"/rate-diff/"),{params:{access_key:n,vehicle_profile_id:i,vehicle_info_id:s}});case 3:return c=e.sent,e.abrupt("return",l(c.data.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},59497:function(e,t,r){"use strict";r.d(t,{B:function(){return n}});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.current&&e.current.scrollIntoView&&(t>0?setTimeout((function(){var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start"})}),t):e.current.scrollIntoView({behavior:"smooth",block:"start"}))}},96871:function(e,t,r){"use strict";r.d(t,{$J:function(){return g},$n:function(){return d},GO:function(){return b},Yq:function(){return h},dz:function(){return c},fm:function(){return f},oi:function(){return u},sm:function(){return y}});var n,i=r(82917),o=r(52983),a=r(97458);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c="phone",d="times",u="vehicle",h="refund",f=[c,d,u,h],p=(n={},(0,i.Z)(n,c,!1),(0,i.Z)(n,d,!1),(0,i.Z)(n,u,!1),(0,i.Z)(n,h,!1),n),m="TOGGLE_PARKING_PASS_MODAL",g=function(e){return{type:m,modal:e}};function v(e,t){return t.type===m?l(l({},e),{},(0,i.Z)({},t.modal,!e[t.modal])):e}var x=o.createContext({state:p,dispatch:function(){}}),b=function(e){var t=e.value,r=e.children,n=(0,o.useReducer)(v,t||p),i={state:n[0],dispatch:n[1]};return(0,a.jsx)(x.Provider,{value:i,children:r})},y=function(){var e=(0,o.useContext)(x);return void 0===e&&console.warn("useParkingPassModal must be used within a ParkingPassModalProvider."),e}},8285:function(e,t,r){"use strict";var n=r(73822),i=r(96382),o=r(39450);t.Z=function(){var e=(0,i.useRouter)().query,t=(0,n.y)(e,"id"),r=(0,n.y)(e,"key");return(0,o.R8)({reservationId:t,accessKey:r})}},61909:function(e,t,r){"use strict";r.d(t,{O5:function(){return s},Rd:function(){return a},dL:function(){return o},wJ:function(){return n},yr:function(){return i}});var n={borderRadius:"md",borderWidth:"1px",borderColor:"gray.100",flexDirection:"row",shadow:"base",marginTop:4,sx:{"@media print":{shadow:"none"}}},i={padding:4},o={padding:4,borderTopLeftRadius:"0.33rem",borderBottomLeftRadius:"0.33rem"},a={fontSize:"sm",fontWeight:"semibold",lineHeight:"1"},s={marginTop:2.5}},13332:function(e,t,r){"use strict";r.d(t,{Z:function(){return ci}});var n=r(52983),i=r(96382),o=r(24406),a=r(73822),s=r(55238),l=r(8285),c=r(18922),d=r(18863),u=r(97458),h=function(e){var t,r=e.reservation,n=r.redemptionType===d.dj.DISPLAY_ID,i=null===(t=r.partner)||void 0===t?void 0:t.displayName;return(0,u.jsxs)(o.xu,{sx:{"@media print":{color:"black"}},color:"white",children:[(0,u.jsx)(o.X6,{as:"h1",marginY:2,children:"Parking Pass"}),r.event?(0,u.jsx)(o.xv,{fontSize:{base:"base",tablet:"lg"},fontWeight:"semibold",marginBottom:{base:2,tablet:3},children:r.event.title}):null,(0,u.jsx)(o.xv,{fontSize:r.event?{base:"sm",tablet:"base"}:{base:"base",tablet:"lg"},fontWeight:r.event?{base:"normal",tablet:"semibold"}:"semibold","data-testid":"Header-text-facilityname",children:r.facility.title}),!n||i?(0,u.jsxs)(o.xv,{display:"flex",fontSize:{base:"sm",tablet:"base"},marginTop:1.5,lineHeight:"1",marginBottom:1,children:[!n&&(0,u.jsxs)(o.xu,{as:"span",display:"inline-block",marginRight:i?1:0,paddingRight:i?1:0,borderColor:"white",borderRightWidth:i?"1px":"0",children:["Rental ID: ",r.displayId]}),i?(0,u.jsxs)(o.xu,{as:"span",children:["Purchased through ",i]}):null]}):null]})},f=function(e){var t=e.children;return(0,u.jsx)(o.kC,{flexDirection:"column",width:{base:"100%",desktop:"350px"},sx:{"@media print":{width:"350px"}},children:(0,u.jsx)(o.xu,{as:"aside",bgColor:{base:"transparent",desktop:"gray.light"},borderRadius:{base:"none",tablet:"lg"},sx:{"@media print":{borderRadius:"lg"}},children:t})})},p=function(e){var t=e.children;return(0,u.jsx)(o.kC,{flexDirection:"column",width:"100%",flex:{base:null,desktop:1},marginRight:{base:0,desktop:32},marginBottom:0,sx:{"@media print":{flex:1,marginRight:8}},children:t})},m=r(41502),g=function(e){var t=e.children,r=(0,m._)();return(0,u.jsx)(o.xu,{marginTop:r?0:10,maxWidth:"1120px",marginX:"auto",sx:{"@media print":{marginTop:10,button:{display:"none"}}},children:t})},v=function(e){var t=e.children;return(0,u.jsx)(o.kC,{alignItems:"center",justifyContent:"center",flex:1,width:"100%",flexDirection:"column",children:(0,u.jsx)(o.kC,{flexDirection:"column",backgroundColor:"white",borderRadius:{base:"none",tablet:"md"},borderWidth:{base:"0",tablet:"1px"},borderTopWidth:"1px",borderColor:"gray.100",width:{base:"100%",tablet:"440px"},position:"relative",sx:{"@media print":{borderRadius:"md",borderWidth:"1px"}},children:t})})},x=function(e){var t=e.children;return(0,u.jsx)(o.kC,{width:"100%",flex:{base:null,desktop:1},backgroundColor:"gray.light",borderTopRightRadius:{base:0,desktop:"md"},borderBottomRightRadius:{base:0,tablet:"md"},borderBottomLeftRadius:{base:0,tablet:"md",desktop:"0"},alignItems:"center",paddingTop:{base:0,tablet:6},paddingBottom:{base:0,tablet:6},flexDirection:"column",sx:{"@media print":{padding:3,alignItems:"center",justifyContent:"center",backgroundColor:"white",borderBottomRightRadius:"md",borderTopRightRadius:"md",flex:1}},children:t})},b=function(e){var t=e.children;return(0,u.jsx)(o.kC,{flexDirection:{base:"column",desktop:"row"},alignItems:{base:"center",desktop:"stretch"},width:"100%",marginX:"auto",boxShadow:{base:"none",tablet:"lg"},maxWidth:"1120px",marginTop:{base:-2,tablet:-36},sx:{"@media print":{flexDirection:"row",alignItems:"stretch",borderWidth:"1px",borderColor:"gray.100",borderRadius:"md",boxShadow:"none",marginTop:0}},children:t})},y=function(e){var t=e.children;return(0,u.jsx)(o.xu,{paddingBottom:{base:0,tablet:8},paddingX:{base:0,tablet:4},children:t})},j=function(e){var t=e.children;return(0,u.jsx)(o.xu,{bgColor:"primary.default",sx:{"@media print":{bgColor:"white",paddingBottom:6}},paddingTop:4,paddingBottom:{base:12,tablet:40},children:(0,u.jsx)(o.W2,{maxWidth:{tablet:"100%"},children:t})})},O=r(30278),w=function(){return(0,u.jsx)(o.xu,{sx:{"@media print":{display:"flex",marginX:-4,bgColor:"primary.default",paddingY:1,paddingLeft:8,marginBottom:1}},display:"none",children:(0,u.jsx)(o.JO,{width:"10",height:"10",as:O.DU,fill:"white"})})},C=r(82917);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=function(e){var t=e.children,r=e["data-testid"],n=e.style,i=void 0===n?{}:n;return(0,u.jsx)(o.kC,P(P({paddingY:8,paddingX:4,borderBottomWidth:"1px",borderColor:"gray.100",alignItems:{base:"center",tablet:"flex-start"},flexDirection:"column",_last:{borderBottomWidth:{base:"1px",tablet:0},borderBottomRadius:{base:"none",tablet:"lg"}},_first:{borderTopRadius:{base:"none",tablet:"lg"}},"data-testid":r},i),{},{children:t}))},T=n.forwardRef((function(e,t){var r=e.children;return(0,u.jsx)(o.xu,{sx:{"@media print":{marginX:4},scrollMarginTop:{base:"4rem",tablet:0}},as:"main",backgroundColor:"white",ref:t,children:r})}));T.displayName="ParkingPassWrapper";var D=T,I=n.forwardRef((function(e,t){var r=e.children;return(0,u.jsx)(o.xu,{marginBottom:{base:8,tablet:10,desktop:14},paddingBottom:{base:8,tablet:0},paddingX:{base:4,desktop:0},borderBottomWidth:{base:"1px",tablet:0},borderColor:"gray.100",_last:{marginBottom:0},sx:{scrollMarginTop:"5rem"},ref:t,children:r})}));I.displayName="ParkingDetailsItem";var _=I,E=function(e){var t=e.children;return(0,u.jsx)(o.kC,{flexDirection:{base:"column",desktop:"row"},alignItems:{base:"center",desktop:"stretch"},width:"100%",marginX:"auto",maxWidth:"1120px",marginTop:10,sx:{"@media print":{flexDirection:"row",alignItems:"stretch"}},children:t})},R=r(15802),z=r(31860),A=function(){var e=(0,z.bT)().data;return(0,o.Sx)({base:!0,tablet:!1})?null:(0,u.jsxs)(S,{style:{backgroundColor:"gray.light"},children:[(0,u.jsx)(o.xv,{marginBottom:4,children:"For the smoothest parking experience, try the SpotHero mobile app."}),(0,u.jsx)(R.Z,{email:(null===e||void 0===e?void 0:e.email)||null})]})},M=function(e){var t=e.instructions,r=e.showHeading,i=void 0===r||r,a=e.subHeading,s=void 0===a?null:a,l=(0,n.useMemo)((function(){return t?t.map((function(e,t){var r=e.text;return(0,u.jsxs)(o.kC,{borderRadius:"md",borderWidth:"1px",borderColor:"gray.100",padding:3,marginBottom:4,children:[(0,u.jsx)(o.kC,{fontWeight:"semibold",color:"white",backgroundColor:"primary.default",width:7,height:7,borderRadius:"50%",alignSelf:"start",alignItems:"center",justifyContent:"center",fontSize:"base",children:t+1}),(0,u.jsx)(o.kC,{flex:"1",flexDirection:"column",marginLeft:4,dangerouslySetInnerHTML:{__html:r},fontSize:"base",whiteSpace:"pre-line"})]},e.id)})):[]}),[t]);return null!==t&&void 0!==t&&t.length?(0,u.jsxs)(u.Fragment,{children:[i&&(0,u.jsx)(o.X6,{id:"parking-instructions",as:"h2",marginBottom:3,children:"Parking Instructions"}),s&&(0,u.jsx)(o.X6,{id:"parking-instructions",as:"h3",marginBottom:4,marginTop:4,children:s}),l]}):null},N=r(59480),F=r(48765),B=r(65683),Z=r(46714),V=r(97646),H=r(5743);function W(e){var t=e.activeStatus;return e.paymentStatus===d.dn.REFUND?"cancelled":t===d.Fl.NOT_STARTED?"upcoming":t===d.Fl.ENDED?"past":t===d.Fl.ACTIVE?"active":null}var L="phone_number_updated",U="reservation_times_updated",Y="vehicle_updated",q="Parking Pass 3.0";function X(e){try{var t,r=e.location,n=e.reservation,i=e.isScan2Pay,o=void 0!==i&&i,a=e.updatedProperties,s=void 0===a?[]:a,l=e.reservationPriceChanged,c=void 0===l?0:l,d=e.extraTimePurchased,u=void 0===d?0:d,h=n.addOns,f=null===h||void 0===h?void 0:h.find((function(e){return e.type===H.CAR_PROTECTION_ADDON_TYPE})),p={cannot_adjust_after_entry:!n.facility.allowUpdatingReservationAfterEntry,currency:n.currencyType.toLowerCase(),extra_time_purchased:u,license_plate_updated:!1,phone_number_updated:!1,reservation_cancelled:!1,reservation_price_changed:c,reservation_times_updated:!1,location:r,parking_type:n.reservationType,rental_id:n.rentalId,vehicle_updated:!1,is_scan2pay:o,scanned_in_time:n.entryTimestamp,scanned_out_time:n.exitTimestamp,reservation_status:W({activeStatus:n.activeStatus,paymentStatus:n.paymentStatus}),partner:(null===(t=n.partner)||void 0===t?void 0:t.slug)||null,has_parked_car_protection:Boolean(f),facility_country:n.city.countryCode};s.forEach((function(e){p[e]=!0})),F.ZP.track({event:"Reservation Updated",properties:p,additionalOptions:{context:{protocols:{event_version:1}}}})}catch(m){(0,B.X3)({error:m,errorMessage:"Segment Event Failed - trackReservationUpdated"})}}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K,J,Q=function(){var e=(0,l.Z)().data,t=(0,z.bT)().data,r=(0,N.Z)().cloudfrontViewerCountryCode;return(0,n.useCallback)((function(n){var i=n.clickTarget,o=n.isReservationChange;e&&t&&function(e){var t=e.reservation,r=e.user,n=e.clickTarget,i=e.isReservationChange;e.cloudfrontViewerCountryCode;try{var o=(0,Z.Z)(),a=r.email,s=r.admin,l=r.status,c=t.starts,u=t.ends,h=t.timezone,f=t.reservationType,p=t.city,m=t.facility,g=t.currencyType,v=t.event,x=t.rentalId,b=t.entryTimestamp,y=t.exitTimestamp,j=f===d.nc.MONTHLY,O=(0,Z.Z)(c).tz(h),w=(0,Z.Z)(u).tz(h),C=G(G(G({admin_user:s,cannot_adjust_after_entry:!m.allowUpdatingReservationAfterEntry,click_target:n,city:p.slug,country:t.city.countryCode,currency:g.toLowerCase(),email:a||""},v&&{event_id:v.id}),{},{is_reservation_change:i,location:q,parking_spot_id:m.id,parking_spot_name:m.title,parking_type:f,rental_end_time_local:w.format(d.Wk),rental_end_time_utc:w.toISOString(),rental_lead_time:O.diff(o.tz(h),"minutes"),rental_length:j?null:w.diff(O,"minutes"),rental_start_time_local:O.format(d.Wk),rental_start_time_utc:O.toISOString(),rental_id:x,scan_in_time:b,scan_out_time:y,scanned_in_time:Boolean(b),scanned_out_time:Boolean(y),state:m.state},(0,V.Z)()),{},{user_logged_in:l===H.UserStatuses.USER||l===H.UserStatuses.ADMIN});F.ZP.track({event:"Parking Pass Click",properties:C,additionalOptions:{context:{protocols:{event_version:2}}}})}catch(k){(0,B.X3)({error:k,errorMessage:"Segment Event Failed - parkingPassClick"})}}({reservation:e,user:t,clickTarget:i,isReservationChange:o,cloudfrontViewerCountryCode:r})}),[e,t,r])},ee="pass",te="details",re="howTo",ne="ADD_LICENSE_VIEW",ie="VEHICLE_SELECT_VIEW",oe="PAYMENT_VIEW",ae="REFUND_VIEW",se=(K={},(0,C.Z)(K,ae,"refund-oversize"),(0,C.Z)(K,oe,"pay-oversize"),(0,C.Z)(K,ie,"vehicle-select"),(0,C.Z)(K,ne,"add-license-plate"),K),le="default-vehicle-entrance",ce=function(e){var t=e.facility,r=Q(),i=t.gettingHere,a=t.addresses,s=(0,n.useMemo)((function(){return a.find((function(e){return e.types.includes(le)}))}),[a]);if(!s)return null;var l="".concat(s.latitude,"%2C").concat(s.longitude),c="https://www.google.com/maps/search/?api=1&query=".concat(l);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.X6,{as:"h2",marginBottom:3,children:"Getting There"}),s.streetAddress?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",children:"Enter At:"}),(0,u.jsxs)(o.rU,{href:c,onClick:function(){return r({clickTarget:"Enter At Link",isReservationChange:!1})},isExternal:!0,rel:"noopener noreferrer",marginBottom:6,display:"inline-block",fontSize:"base",children:[s.streetAddress,", ",s.city,","," ",s.state]})]}):null,(0,u.jsx)(o.xu,{marginBottom:6,fontSize:"base",dangerouslySetInnerHTML:{__html:i}}),(0,u.jsx)(o.zx,{variant:"secondary",href:c,onClick:function(){return r({clickTarget:"Navigate There",isReservationChange:!1})},asAnchor:!0,isExternal:!0,leftIcon:(0,u.jsx)(O.Fi,{height:"1.125rem",width:"1.125rem"}),textTransform:"auto",width:{base:"100%",tablet:"auto"},alignSelf:{base:"auto",tablet:"start"},sx:{"@media print":{display:"none"}},children:"Navigate There"})]})},de=function(e){var t=e.stallName;if(!t)return null;var r=t.length>4;return(0,u.jsxs)(o.kC,{marginX:4,alignItems:"center",marginTop:4,children:[(0,u.jsx)(o.kC,{backgroundColor:"primary.default",minWidth:12,minHeight:12,borderRadius:"30px",marginRight:3,alignItems:"center",justifyContent:"center",children:r?(0,u.jsx)(o.JO,{"data-testid":"spothero-icon",width:6,height:"auto",as:O.Dx,color:"white"}):(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:t.length>2?"base":"xl",color:"white",children:t})}),(0,u.jsxs)(o.xv,{"data-testid":"StallDisplay-text-stall",children:["Park at your assigned spot, ",t]})]})},ue=r(48327),he=r.n(ue),fe={src:"/consumer-checkout/_next/static/media/too-early.255f5383.svg",height:24,width:25,blurWidth:0,blurHeight:0},pe=r(17859),me=function(e){var t=e.reservation,r=(0,N.Z)().siteUrl,i=(0,n.useState)(!1),a=i[0],s=i[1],l=(0,n.useState)(!1),c=l[0],h=l[1],f=(0,m.s)(),p=t.activeStatus!==d.Fl.NOT_STARTED,g=t.accessKey?"".concat(r,"/qrcode/").concat(t.rentalId,"?key=").concat(t.accessKey):"".concat(r,"/qrcode/").concat(t.rentalId),v=function(){s((function(e){return!e}))},x=!p&&!c&&!f,b=x?o.zx:o.xu;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(b,{onClick:x?v:null,"aria-label":x?"Show Barcode Early":"",background:"transparent",boxShadow:"none",padding:1,paddingTop:t.facility.barcodeType===pe.Jd.QR_CODE?1:2.5,paddingBottom:t.facility.barcodeType===pe.Jd.QR_CODE?1:0,border:0,borderRadius:"md",_hover:{background:"transparent"},position:"relative",children:[(0,u.jsx)(o.Ee,{src:g,maxWidth:t.facility.barcodeType===pe.Jd.QR_CODE?36:52,minWidth:36,minHeight:t.facility.barcodeType===pe.Jd.QR_CODE?36:20,"data-testid":"scan-code",opacity:x?"0.25":"1",filter:x?"blur(2px)":"none",alt:"Redemption Code"}),x&&(0,u.jsx)(o.kC,{position:"absolute",right:0,bottom:0,children:(0,u.jsx)(he(),{loader:function(e){var t=e.src;return"".concat(t)},width:24,src:fe,alt:"Blurred Redemption Code"})})]}),(0,u.jsxs)(o.u_,{hasHeader:!0,hasFooter:!0,size:"sm",isOpen:a,onClose:v,children:[(0,u.jsx)(o.xB,{margin:0,as:"h1",fontSize:"lg",children:"Parking Early?"}),(0,u.jsx)(o.fe,{children:(0,u.jsxs)(o.kC,{width:"100%",flexDirection:"column",children:[(0,u.jsx)(o.xv,{marginBottom:4,fontWeight:"semibold",children:"You may be required to pay extra on-site when you exit if you park now."}),(0,u.jsx)(o.xv,{children:"Wait until your reservation starts to avoid additional costs."})]})}),(0,u.jsxs)(o.mz,{children:[(0,u.jsx)(o.zx,{fontFamily:"body",variant:"secondary",onClick:v,marginRight:4,children:"I'll Wait"}),(0,u.jsx)(o.zx,{onClick:function(){h(!0),v()},fontFamily:"body",variant:"primary",children:"Park Early"})]})]})]})},ge=function(e){var t,r=e.reservation,n=r.displayId!==String(r.rentalId)&&r.displayId.length>10;if(r.redemptionType===d.dj.SCAN_CODE)return(0,u.jsx)(me,{reservation:r});if(r.redemptionType===d.dj.LICENSE_PLATE){var i,a=(null===(i=r.vehicle)||void 0===i?void 0:i.licensePlateValue)||"";return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:[0===a.length&&"No ","License Plate"]}),(0,u.jsx)(o.xv,{fontWeight:"bold",fontSize:"2xl",children:(t=a,6===t.length?"".concat(t.slice(0,3)," ").concat(t.slice(3)):t)})]})}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"Rental ID"}),(0,u.jsx)(o.xv,{fontWeight:n?"semibold":"bold",fontSize:n?"base":"2xl",children:r.displayId})]})},ve=function(e){var t=e.commuterRateDetails;return!0!==(null===t||void 0===t?void 0:t.hasRate)?null:(0,u.jsx)(o.bZ,{marginTop:4,status:"warning",title:"Restrictions Apply",description:t.description})},xe=r(96871),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Add/Change Vehicle",t=Q(),r=(0,xe.sm)(),n=r.dispatch,i=function(){t({clickTarget:e,isReservationChange:!0})},o=function(){i(),n((0,xe.$J)(xe.oi))};return{onClick:o}},ye=r(61909);function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var we=(J={},(0,C.Z)(J,pe.EA.LICENSE_PLATE,{src:{src:"/consumer-checkout/_next/static/media/lp_redemption.68a348f5.svg",height:48,width:48,blurWidth:0,blurHeight:0},alt:"License Plate icon"}),(0,C.Z)(J,pe.EA.VALET,{src:{src:"/consumer-checkout/_next/static/media/valet_redemption.14db8d36.svg",height:48,width:49,blurWidth:0,blurHeight:0},alt:"Valet Attendant icon"}),J),Ce=function(e){var t=e.parkingHint,r=e.onInstructionsClick;if(!t)return null;var n=we[t.icon||""]||null;return(0,u.jsxs)(o.kC,Oe(Oe({},ye.wJ),{},{children:[n?(0,u.jsx)(o.xu,Oe(Oe({},ye.dL),{},{backgroundColor:"gray.50",padding:3,children:(0,u.jsx)(o.xu,{width:12,height:12,children:(0,u.jsx)(he(),{loader:function(e){var t=e.src;return"".concat(t)},src:n.src,alt:n.alt})})})):null,(0,u.jsxs)(o.xu,Oe(Oe({},ye.yr),{},{children:[(0,u.jsx)(o.xv,{children:t.text}),(0,u.jsx)(o.rU,{sx:{"@media print":{display:"none"}},display:"block",fontFamily:"body",marginTop:4,onClick:r,href:"#parking-instructions",children:"Read Instructions"})]}))]}))},ke=function(e){var t,r,n,i,o=e.reservation,a=!(o.facility.phoneNumberRequired||o.reservationType===d.nc.MONTHLY)||Boolean(o.phoneNumber&&"string"===typeof o.phoneNumber&&""!==o.phoneNumber),s=!1===(null===(t=o.facility.redemptionInfo)||void 0===t||null===(r=t.warning)||void 0===r?void 0:r.showWarning)||!o.vehicleRequired||o.vehicleRequired&&o.vehicle&&o.vehicle.licensePlateValue&&Object.keys(o.vehicle).length>0;return{isPhoneOkay:a,isVehicleOkay:Boolean(s),showVehicleWarning:!s&&Boolean(null===(n=o.facility.redemptionInfo)||void 0===n?void 0:n.warning),showParkingHint:s&&a&&Boolean(null===(i=o.facility.redemptionInfo)||void 0===i?void 0:i.parkingHint)}};function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Te=function(e){var t,r=e.reservation,i=e.onInstructionsClick,a=ke({reservation:r}),s=a.isPhoneOkay,l=a.isVehicleOkay,c=a.showVehicleWarning,h=a.showParkingHint,f=l&&s,p=be("License Plate Warning - Add License Plate"),m=(0,o.Tb)(),g=(0,n.useState)(!1),v=g[0],x=g[1],b=r.partner&&!1===(null===(t=r.partner)||void 0===t?void 0:t.updateVehicleEnabled);if((0,n.useEffect)((function(){var e=setTimeout((function(){x(!0)}),800);return function(){return clearTimeout(e)}}),[]),r.activeStatus===d.Fl.ENDED||r.reservationStatus===d.Z0.CANCELLED)return null;var y,j,w,C,k=function(e){e.preventDefault(),i("Review Parking Instructions")},P=m?"":"all 300ms ease-in-out";return s||l?c?(0,u.jsxs)(o.kC,Se(Se({},ye.wJ),{},{"data-testid":"NotificationBox",children:[(0,u.jsx)(o.xu,Se(Se({},ye.dL),{},{backgroundColor:"red.100",children:(0,u.jsx)(o.JO,{width:"1.125rem",height:"auto",as:O.bT,color:"error"})})),(0,u.jsxs)(o.xu,Se(Se({},ye.yr),{},{children:[(0,u.jsx)(o.xv,Se(Se({},ye.Rd),{},{children:(null===(y=r.facility.redemptionInfo)||void 0===y||null===(j=y.warning)||void 0===j?void 0:j.header)||""})),(0,u.jsx)(o.xv,Se(Se({},ye.O5),{},{children:(null===(w=r.facility.redemptionInfo)||void 0===w||null===(C=w.warning)||void 0===C?void 0:C.body)||""})),(0,u.jsx)(o.zx,Se(Se({},p),{},{sx:{"@media print":{display:"none"}},fontFamily:"body",width:"100%",marginTop:4,variant:"primary","data-testid":"NotificationBox-add-plate",children:"Add License Plate"}))]}))]})):s?h?(0,u.jsx)(Ce,{parkingHint:r.facility.redemptionInfo.parkingHint,onInstructionsClick:k}):f?(0,u.jsxs)(o.kC,Se(Se({},ye.wJ),{},{overflow:"hidden",position:"relative",children:[(0,u.jsx)(o.xu,{top:0,left:-80,right:-80,bottom:0,zIndex:1,position:"absolute",backgroundColor:"success",transformOrigin:"center left",transition:P,transform:v?"rotate(-30deg)":"rotate(0deg)",pointerEvents:"none"}),(0,u.jsx)(o.xv,{opacity:v?"0%":"100%",color:"white",fontSize:"lg",transition:P,fontWeight:"semibold",zIndex:1,position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",children:"You're all set!"}),(0,u.jsx)(o.xu,Se(Se({},ye.dL),{},{backgroundColor:"green.100",children:(0,u.jsx)(o.JO,{width:"1.125rem",height:"auto",as:O.MC,color:"success",transition:P,transform:v?"translateY(0rem)":"translateY(3.75rem)",opacity:v?"100%":"0%"})})),(0,u.jsxs)(o.xu,Se(Se({},ye.yr),{},{children:[(0,u.jsx)(o.xv,Se(Se({},ye.Rd),{},{color:"success",transition:P,transform:v?"translateY(0rem)":"translateY(1.75rem)",children:"You're all set!"})),(0,u.jsxs)(o.xv,Se(Se({},ye.O5),{},{transform:v?"translateY(0rem)":"translateY(2.25rem)",transition:P,children:["Make sure to"," ",(0,u.jsx)(o.rU,{onClick:k,href:"#parking-instructions",children:"review the Parking Instructions"})," ","before entering!"]}))]}))]})):(0,u.jsxs)(o.kC,Se(Se({},ye.wJ),{},{"data-testid":"NotificationBox",children:[(0,u.jsx)(o.xu,Se(Se({},ye.dL),{},{backgroundColor:"red.100",children:(0,u.jsx)(o.JO,{width:"1.125rem",height:"auto",as:O.bT,color:"error"})})),(0,u.jsxs)(o.xu,Se(Se({},ye.yr),{},{children:[(0,u.jsx)(o.xv,Se(Se({},ye.Rd),{},{children:"License Plate Required"})),(0,u.jsx)(o.xv,Se(Se({},ye.O5),{},{children:"Add your license plate to avoid tows or onsite issues."})),(0,u.jsx)(o.zx,Se(Se({},p),{},{sx:{"@media print":{display:"none"}},fontFamily:"body",width:"100%",marginTop:4,variant:"primary","data-testid":b?"NotificationBox-add-plate":"NotificationBox-add-vehicle",children:b?"Add License Plate":"Add Vehicle"}))]}))]})):(0,u.jsx)(o.bZ,{title:"Add Phone Number",description:"Add your phone number in case we need to contact you about your reservation.",status:"warning",marginTop:4,sx:{"@media print":{shadow:"none"}}}):(0,u.jsx)(o.bZ,{title:"Don't Get Towed",description:"You are at risk of being towed. Add your missing info before parking.",status:"error",marginTop:4,sx:{"@media print":{shadow:"none"}}})},De=function(e){var t=e.reservation,r=e.onInstructionsClick,i=e.onPrintClick,a=e.showRedemptionOnRefund,s=void 0!==a&&a,l=Q(),c=(0,m.s)(),h=t.redemptionType===d.dj.SCAN_CODE,f=t.reservationStatus,p=t.entryTimestamp,g=t.facility,v=g.allowUpdatingReservationAfterEntry,x=g.addresses,b=(0,n.useMemo)((function(){return x.find((function(e){return e.types.includes(le)}))}),[x]),y=b?"https://www.google.com/maps/search/?api=1&query=".concat(null===b||void 0===b?void 0:b.latitude,"%2C").concat(null===b||void 0===b?void 0:b.longitude):null;return(0,u.jsxs)(o.kC,{backgroundColor:"white",paddingTop:{base:4,tablet:6,desktop:12},paddingBottom:{base:6,desktop:12},borderBottomLeftRadius:{base:"0",desktop:"md"},borderTopLeftRadius:"md",borderTopRightRadius:{base:"md",desktop:"0"},width:"100%",flex:{base:null,desktop:1},alignItems:"center",justifyContent:"center",flexDirection:"column",sx:{"@media print":{borderRightWidth:"1px",borderTopRightRadius:"0",borderBottomRightRadius:"0",borderColor:"gray.100",flex:1}},children:[f===d.Z0.CANCELLED?(0,u.jsxs)(o.kC,{alignItems:"center",justifyContent:"center",flexDirection:"column",paddingY:{base:6,tablet:0},children:[s&&(0,u.jsx)(o.kC,{borderRadius:"md",boxShadow:"lg",flexDirection:"column",alignItems:"center",paddingX:h?0:8,paddingY:h?0:4,backgroundColor:"white",marginBottom:4,children:(0,u.jsx)(ge,{reservation:t})}),(0,u.jsxs)(o.kC,{children:[(0,u.jsx)(o.JO,{width:4,height:"auto",as:O.MC,color:"success",marginRight:1.5}),(0,u.jsx)(o.xv,{fontSize:"lg",fontWeight:"semibold",color:"success",children:"Reservation Refunded"})]}),(0,u.jsx)(o.kC,{maxWidth:"60%",justifyContent:"center",flexDirection:"column",children:t.partner?(0,u.jsx)(o.xv,{fontSize:"sm",textAlign:"center",marginTop:3,color:"text.secondary.light",children:"Refunds may take up to 21 business days to appear on payment accounts."}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.xv,{fontSize:"sm",textAlign:"center",marginBottom:2,marginTop:3,color:"text.secondary.light",children:"Refunds to SpotHero credit are issued immediately."}),(0,u.jsx)(o.xv,{fontSize:"sm",textAlign:"center",color:"text.secondary.light",children:"Refunds to other payment methods may take 5-10 business days to appear on payment accounts."})]})})]}):(0,u.jsxs)(o.kC,{marginTop:{base:-9,tablet:0},flexDirection:"column",alignItems:"center",sx:{"@media print":{marginTop:0}},children:[(0,u.jsx)(o.kC,{borderRadius:"md",boxShadow:"lg",flexDirection:"column",alignItems:"center",paddingX:h?0:8,paddingY:h?0:4,backgroundColor:"white",children:(0,u.jsx)(ge,{reservation:t})}),(0,u.jsx)(o.xv,{sx:{"@media print":{display:"none"}},paddingTop:4,fontWeight:"bold",fontSize:"lg",color:t.activeStatus===d.Fl.ENDED?"text.primary.light":"text.secondary.light",children:t.activeStatus})]}),c&&t.reservationStatus!==d.Z0.CANCELLED&&t.activeStatus!==d.Fl.ENDED?(0,u.jsxs)(o.kC,{sx:{"@media print":{display:"none"}},marginTop:3,alignItems:"center",children:[(0,u.jsx)(o.xv,{whiteSpace:"pre",color:"text.secondary.light",lineHeight:"1.4",children:h?"Scan from a mobile device or ":"Use your mobile device or "}),(0,u.jsx)(o.zx,{textTransform:"none",fontFamily:"body",variant:"tertiary",onClick:function(e){l({clickTarget:"Print This Page",isReservationChange:!1}),i(e)},children:"print this page"})]}):null,y?(0,u.jsx)(o.zx,{variant:"secondary",href:y,onClick:function(){return l({clickTarget:"Navigate to Spot",isReservationChange:!1})},asAnchor:!0,isExternal:!0,leftIcon:(0,u.jsx)(O.y1,{height:"1.125rem",width:"1.125rem"}),textTransform:"auto",width:{base:"calc(100% - 4rem)",tablet:"auto"},marginBottom:2,marginTop:6,sx:{"@media print":{display:"none"}},rel:"noopener noreferrer",children:"Navigate to Spot"}):null,(0,u.jsx)(de,{stallName:t.stallName}),(0,u.jsxs)(o.kC,{flexDirection:"column",maxWidth:"21.5rem",marginX:4,children:[(0,u.jsx)(ve,{commuterRateDetails:t.commuterRateDetails}),(0,u.jsx)(Te,{reservation:t,onInstructionsClick:r}),!v&&!p&&(0,u.jsx)(o.bZ,{status:"neutral",description:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("strong",{children:"Time & vehicle changes are not allowed at this facility after entry."})," ","You will not be refunded for leaving early and you may be charged extra if you leave late."]}),showIcon:!0,icon:O.BR,marginTop:4})]})]})},Ie={src:"/consumer-checkout/_next/static/media/car.f2586b93.svg",height:24,width:24,blurWidth:0,blurHeight:0},_e=r(27789),Ee=r(39450),Re=function(e){var t=e.title,r=(0,o.pm)(),i=(0,n.useRef)(null);return function(){var e=function(){i.current&&r.close(i.current)};i.current=r({position:"top",duration:3e3,render:function(){return(0,u.jsx)(o.bZ,{title:t,status:"success",showIcon:!0,showDismiss:!0,onDismissClick:e})}})}},ze=r(3775);function Ae(e){try{var t=e.reservation,r=e.priceDifference,n=e.oldVehicle,i=e.newVehicle,o=e.selectedPaymentMethod,a=e.view,s={parking_pass_type:t.parkingPassType,price_difference:r,payment_type:o?ze.A[o]:null,old_license_plate:(null===n||void 0===n?void 0:n.licensePlateValue)||null,old_make_model:(null===n||void 0===n?void 0:n.displayDescription)||null,new_license_plate:i.licensePlateValue,new_make_model:i.displayDescription,view:se[a]};F.ZP.track({event:"Reservation Vehicle Updated",properties:s,additionalOptions:{context:{protocols:{event_version:1}}}})}catch(l){(0,B.X3)({error:l,errorMessage:"Segment Event Failed - trackReservationVehicleUpdated"})}}function Me(e){try{var t=e.reservation,r=e.priceDifference,n=e.oldVehicle,i=e.newVehicle,o=e.selectedPaymentMethod,a=e.view,s=e.errors,l={parking_pass_type:t.parkingPassType,price_difference:r,payment_type:o?ze.A[o]:null,current_license_plate:(null===n||void 0===n?void 0:n.licensePlateValue)||null,current_make_model:(null===n||void 0===n?void 0:n.displayDescription)||null,attempted_license_plate:null===i||void 0===i?void 0:i.licensePlateValue,attempted_make_model:null===i||void 0===i?void 0:i.displayDescription,view:se[a],errors:s.map((function(e){return e.message}))};F.ZP.track({event:"Reservation Vehicle Update Failed",properties:l,additionalOptions:{context:{protocols:{event_version:1}}}})}catch(c){(0,B.X3)({error:c,errorMessage:"Segment Event Failed - trackReservationVehicleUpdateFailed"})}}var Ne=r(77565);function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ze="license_plate",Ve="LICENSE_PLATE_FORM_ID",He=function(e){var t,r=e.reservation,i=e.onClose,a=e.isOpen,s=(0,_e.cI)(),l=s.control,c=s.handleSubmit,d=s.reset,h=(0,z.bT)().data,f=(null===(t=r.vehicle)||void 0===t?void 0:t.licensePlateValue)||"",p=(0,n.useState)(null),m=p[0],g=p[1],v=Q(),x=(0,Ee.Hc)(),b=x.mutate,y=x.isLoading,j=Re({title:"License Plate Updated"}),O=function(e){var t=e.newVehicle,n=e.errors;Me({reservation:r,priceDifference:0,oldVehicle:r.vehicle,newVehicle:t||null,view:ne,errors:n})};return(0,u.jsxs)(o.u_,{"data-testid":"AddLicensePlate",hasHeader:!0,hasFooter:!0,size:"sm",isOpen:a,hideCloseButton:y,closeOnOverlayClick:!1,onClose:i,onCloseComplete:function(){d((0,C.Z)({},Ze,f)),g(null)},children:[(0,u.jsxs)(o.xB,{children:[f.length>0?"Change":"Add"," License Plate"]}),(0,u.jsx)(o.fe,{children:(0,u.jsxs)(o.kC,{as:"form",onSubmit:c((function(e){var t,n=e.license_plate,o={licensePlateValue:null===(t=r.vehicle)||void 0===t?void 0:t.licensePlateValue};b({reservationId:r.rentalId,price:r.priceBreakdown.totalPrice,accessKey:r.accessKey,guestVehicle:{licensePlateValue:n},user:h},{onSuccess:function(){!function(e){var t=e.oldVehicle,n=e.newVehicle;X({reservation:r,updatedProperties:[Y],location:q,reservationPriceChanged:0}),Ae({reservation:r,priceDifference:0,oldVehicle:t,newVehicle:n,view:ne}),i(),j()}({oldVehicle:o,newVehicle:{licensePlateValue:n}})},onError:function(e){var t=(0,Ne.r)(e,"changing your license plate");O({errors:t,newVehicle:{licensePlateValue:n}}),g("Oops, we hit a snag saving your license plate. Please try again.")}})}),(function(e){return O({errors:Object.values(e)})})),id:Ve,width:"100%",flexDirection:"column",children:[(0,u.jsx)(_e.Qr,{name:Ze,shouldUnregister:!0,defaultValue:f,rules:{required:{value:!0,message:"Please enter your license plate"},maxLength:10,minLength:1,pattern:{value:/^[a-zA-Z0-9]+$/,message:"Please enter a valid license plate"}},control:l,render:function(e){var t,r,n=e.field,i=e.fieldState;return(0,u.jsx)(o.BZ,{width:"100%",display:"block",marginY:3,children:(0,u.jsx)(o.kt,Be(Be({},n),{},{onChange:(r=n.onChange,function(e){if(g(null),"string"===typeof e.target.value){var t=e.target.value.replace(/[^a-z0-9]/gi,"").toUpperCase();r(Be(Be({},e),{},{target:Be(Be({},e.target),{},{value:t})}))}else r(e)}),maxLength:10,isInvalid:i.error,errorMessage:null===(t=i.error)||void 0===t?void 0:t.message,id:Ze,label:"License Plate",width:"100%"}))})}}),m?(0,u.jsx)(o.bZ,{title:m,showIcon:!0,status:"error",size:"md"}):null]})}),(0,u.jsxs)(o.mz,{children:[(0,u.jsx)(o.zx,{onClick:i,variant:"secondary",marginRight:4,fontFamily:"body",disabled:y,"data-testid":"AddLicensePlate-button-cancel",children:"Cancel"}),(0,u.jsx)(o.zx,{form:Ve,onClick:function(){v({clickTarget:"Change Vehicle Modal Submit",isReservationChange:!0})},type:"submit",variant:"primary",fontFamily:"body",disabled:y,"data-testid":"AddLicensePlate-button-submit",children:"Save"})]})]})},We=r(37705),Le=r(92292),Ue=r(88002),Ye=r.n(Ue),qe=r(59497),Xe=r(50167),$e=r(51258),Ge=r(61591),Ke=r(88796),Je=r(78265),Qe=r(49838),et=r(3265),tt=r(32763);function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var it="vehicle-form",ot="addNewVehicle",at="vehicle",st=function(e){var t=e[Ge.E.INFO_ID].value===Je.Q6;return{vehicleInfoId:e[Ge.E.INFO_ID].value,licensePlateValue:e[Ge.E.LICENSE_PLATE],licensePlateState:e[Ge.E.STATE],displayDescription:e[Ge.E.DISPLAY_DESCRIPTION],unlistedModel:t}},lt=function(e){var t,r=e.reservation,i=e.user,a=e.onSuccess,s=e.onRateDiffResponse,l=e.onClose,c=e.isSubmitting,h=e.setIsSubmitting,f=(0,n.useRef)(null),p=i.status===H.UserStatuses.GUEST,m=(0,Ke.L)().mutate,g=function(){var e=(0,Qe.NL)();return(0,et.D)({mutationFn:function(e){var t=e.reservationId,r=e.vehicleProfileId,n=e.vehicleInfoId,i=e.accessKey;return(0,tt.l)({reservationId:t,vehicleProfileId:r,vehicleInfoId:n,accessKey:i})},onSuccess:function(){e.invalidateQueries([z.EK])},onError:function(t){e.invalidateQueries([z.EK])}})}(),v=g.mutate,x=Q(),b=r.priceBreakdown.items.find((function(e){return e.type===H.CAR_PROTECTION_ADDON_TYPE})),y=b?r.priceBreakdown.totalPrice-b.price:r.priceBreakdown.totalPrice,j=(0,n.useMemo)((function(){var e;return null!==(e=r.vehicle)&&void 0!==e&&e.vehicleProfileId&&!i.vehicles.find((function(e){var t;return e.vehicleProfileId===(null===r||void 0===r||null===(t=r.vehicle)||void 0===t?void 0:t.vehicleProfileId)}))?[r.vehicle].concat((0,Le.Z)(i.vehicles)):i.vehicles}),[i.vehicles,r.vehicle]),O=(0,n.useState)((function(){var e;if(null!==(e=r.vehicle)&&void 0!==e&&e.vehicleProfileId)return r.vehicle.vehicleProfileId;if(j.length>0){var t=j.find((function(e){return e.isDefault}));return t?t.vehicleProfileId:j[0].vehicleProfileId}return ot})),w=O[0],k=(0,_e.cI)({defaultValues:(0,C.Z)({},at,w)}),P=k.control,S=k.handleSubmit,T=k.setError,D=k.setValue,I=k.formState,_=I.errors,E=I.dirtyFields,R=_.vehicle,A=(0,Ee.Hc)().mutate,M=c||!E.vehicle&&w===(null===(t=r.vehicle)||void 0===t?void 0:t.vehicleProfileId),N=function(){h(!1),T(at,{type:"custom",message:"Oops, we hit a snag saving your vehicle. Please try again."}),(0,qe.B)(f)},F=function(e){var t=e.vehicle,n=e.errors;Me({reservation:r,priceDifference:0,oldVehicle:r.vehicle,newVehicle:t||null,view:ie,errors:n})},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={reservationId:r.rentalId,price:y,accessKey:r.accessKey,user:i};"vehicleProfileId"in e?n.vehicleProfileId=e.vehicleProfileId:n.guestVehicle=e;var o=r.vehicle;A(n,{onSuccess:function(){a({priceDifference:0,oldVehicle:o,newVehicle:e,view:ie})},onError:function(r){t&&"vehicleProfileId"in e&&D(at,e.vehicleProfileId);var n=(0,Ne.r)(r,"changing your vehicle");F({vehicle:e,errors:n}),N()}})},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return N(),void F({errors:[{message:"No Vehicle Selected"}]});var n=e.unlistedModel||r.reservationType===d.nc.MONTHLY;if(n)B(e,t);else{var i={reservationId:r.rentalId,accessKey:r.accessKey};"vehicleProfileId"in e?i.vehicleProfileId=e.vehicleProfileId:i.vehicleInfoId=e.vehicleInfoId,v(i,{onSuccess:function(r){0!==r.priceDifference?s({vehicle:e,rateDiff:r}):B(e,t)},onError:function(r){var n=(0,Ne.r)(r,"changing your vehicle");F({vehicle:e,errors:n}),t&&"vehicleProfileId"in e&&D(at,e.vehicleProfileId),N()}})}},V=function(){var e=(0,We.Z)(Ye().mark((function e(t){var r,n;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.vehicle,h(!0),r===ot?p?Z(st(t),!1):m({userId:i.id,formVals:t},{onSuccess:function(e){Z(e,!0)},onError:function(e){var t=(0,Ne.r)(e,"adding your vehicle");F({errors:t}),N()}}):(n=j.find((function(e){return e.vehicleProfileId===r})),Z(n,!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.fe,{children:(0,u.jsx)(o.xu,{as:"form",onSubmit:S(V,(function(e){F({errors:Object.values(e)})})),id:it,width:"100%",sx:{".chakra-form-control":{paddingX:0}},children:(0,u.jsxs)(_e.RV,nt(nt({},k),{},{children:[0===j.length?(0,u.jsx)(o.xu,{marginBottom:4,children:(0,u.jsx)(Ge.Z,{hideDefaultCheckbox:p})}):(0,u.jsx)(_e.Qr,{name:at,control:P,render:function(e){var t=e.field;return(0,u.jsxs)(o.FX,nt(nt({sx:{".chakra-radio__control":{marginTop:.5},".chakra-radio__label":{overflow:"hidden"}},marginBottom:4,id:at,label:"Vehicle"},t),{},{children:[j.map((function(e){return(0,u.jsx)(Xe.Z,{isSelected:t.value===e.vehicleProfileId,value:e.vehicleProfileId,children:(0,u.jsx)($e.Z,{displayDescription:e.displayDescription,plate:e.licensePlateValue})},e.vehicleProfileId)})),(0,u.jsxs)(o.xu,{borderRadius:"md",borderWidth:"1px",borderColor:t.value===ot?"primary.default":"gray.200",children:[(0,u.jsx)(Xe.Z,{isSelected:t.value===ot,isParent:!0,value:ot,children:(0,u.jsx)(o.xv,{"data-testid":"VehicleSelect-radio-add-new-vehicle",children:"Add New Vehicle"})}),t.value===ot&&(0,u.jsx)(o.xu,{padding:4,borderTopWidth:"1px",borderTopColor:"gray.200",children:(0,u.jsx)(Ge.Z,{hideDefaultCheckbox:p})})]})]}))}}),R&&(0,u.jsx)(o.bZ,{ref:f,title:R.message,showIcon:!0,status:"error",size:"md"})]}))})}),(0,u.jsxs)(o.mz,{children:[(0,u.jsx)(o.zx,{onClick:l,variant:"secondary",marginRight:4,fontFamily:"body",disabled:c,"data-testid":"ChangeVehicle-button-cancel",children:"Cancel"}),(0,u.jsx)(o.zx,{form:it,onClick:function(){x({clickTarget:"Change Vehicle Modal Submit",isReservationChange:!0})},type:"submit",variant:"primary",fontFamily:"body",disabled:M,"data-testid":"ChangeVehicle-button-submit",children:"Submit"})]})]})},ct=r(38582),dt=r.n(ct),ut=r(15261),ht=r(93118),ft=r(22381),pt=r(7747),mt=r(82076),gt=r(70856);function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bt="oversize_payment_form",yt={fontSize:"sm",lineHeight:"1.4"},jt=function(e){var t=e.reservation,r=e.user,i=e.onSuccess,a=e.onClose,s=e.isSubmitting,l=e.setIsSubmitting,c=e.rateDiff,d=e.vehicle,h=(0,Ee.Hc)().mutate,f=c.chargeAmount,p=c.originalPrice,m=c.newTotalPrice,g=c.priceDifference,v=(0,n.useState)(null),x=v[0],b=v[1],y=(0,ut.T4)(f.charge+f.credit).displayPrice,j=(0,ut.T4)(p).displayPrice,O=(0,ut.T4)(m).displayPrice,w=(0,ut.T4)(f.charge).displayPrice,C=(0,ut.T4)(f.credit).displayPrice,k=(0,_e.cI)(),P=k.handleSubmit,S=k.formState.errors,T=k.watch,D=(0,ft.useStripe)(),I=(0,ft.useElements)(),_=T(ht.C9),E=Q(),R=function(){E({clickTarget:"Payment Modal Submit",isReservationChange:!0})},z=function(e){Me({reservation:t,priceDifference:g,oldVehicle:t.vehicle,newVehicle:d,selectedPaymentMethod:_,view:oe,errors:e})},A=function(e){var n=e.formVals,o=e.paymentRequest,a={reservationId:t.rentalId,price:m,accessKey:t.accessKey,paymentFormVals:n,user:r,paymentRequest:o};"vehicleProfileId"in d?a.vehicleProfileId=d.vehicleProfileId:a.guestVehicle=d;var s=t.vehicle;h(a,{onSuccess:function(){i({priceDifference:g,newVehicle:d,oldVehicle:s,selectedPaymentMethod:n[ht.C9],view:oe})},onError:function(e){var t=(0,Ne.r)(e,"changing your vehicle");b({title:t[0].title||"",description:t[0].message||""}),z(t)},onSettled:function(){l(!1)}})},M=function(){var e=(0,We.Z)(Ye().mark((function e(t){var r,n,i,o;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.formVals,n=t.paymentRequest,b(null),l(!0),i=xt({},r),r[ht.C9]!==gt.LM.CREDIT_CARD||r[ht.R2]!==ht.zo){e.next=11;break}return e.next=7,(0,ht.h1)({stripe:D,elements:I,name:r[ht.i1]||"",onError:function(e){e&&"validation_error"===e.type?(b(B.lt),z([e])):(z([e||{message:"We couldn't charge your card."}]),b({title:"We couldn't charge your card.",description:"Please refresh the page and try again."})),l(!1)}});case 7:if(o=e.sent){e.next=10;break}return e.abrupt("return");case 10:i[ht.MV]=o;case 11:A({formVals:i,paymentRequest:n});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(_e.RV,xt(xt({},k),{},{children:(0,u.jsxs)(pt.bY,{children:[(0,u.jsx)(o.fe,{children:(0,u.jsxs)(o.kC,{width:"100%",flexDirection:"column",children:[(0,u.jsx)(o.xu,{paddingX:3,paddingY:2,background:"gray.50",borderRadius:"md",marginBottom:6,children:"This parking facility charges an oversize fee for your vehicle, ".concat(d.displayDescription,".")}),(0,u.jsxs)(o.rj,{gap:2,width:"100%",templateColumns:"1fr 1fr",marginBottom:6,children:[(0,u.jsx)(o.xv,xt(xt({},yt),{},{children:"Oversize Fee:"})),(0,u.jsxs)(o.xv,xt(xt({justifySelf:"end"},yt),{},{children:["$",y]})),(0,u.jsx)(o.xv,xt(xt({},yt),{},{children:"Original Price:"})),(0,u.jsxs)(o.xv,xt(xt({justifySelf:"end"},yt),{},{children:["$",j]})),(0,u.jsx)(o.iz,{gridColumn:"1 / 3"}),(0,u.jsx)(o.xv,xt(xt({},yt),{},{children:"Total Price:"})),(0,u.jsxs)(o.xv,xt(xt({justifySelf:"end"},yt),{},{children:["$",O]})),f.credit>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.xv,xt(xt({},yt),{},{children:"SpotHero Credit:"})),(0,u.jsxs)(o.xv,xt(xt({justifySelf:"end"},yt),{},{children:["-$",C]}))]}),(0,u.jsx)(o.xv,xt(xt({marginTop:2},yt),{},{fontWeight:"semibold",children:"New amount to be charged:"})),(0,u.jsxs)(o.xv,xt(xt({marginTop:2,justifySelf:"end"},yt),{},{fontWeight:"semibold",children:["$",w]}))]}),(0,u.jsx)(o.xu,{onSubmit:P((function(e){return M({formVals:e})}),(function(e){z(Object.values(e))})),as:"form",noValidate:!0,id:bt,children:(0,u.jsx)(ht.ZP,{onPaymentAttempt:R,user:r,priceBreakdown:{items:[{price:{value:null===c||void 0===c?void 0:c.priceDifference,currencyCode:null===c||void 0===c?void 0:c.currency},type:"oversize_fee",shortDescription:"Oversize Fee",fullDescription:""}],currency:null===c||void 0===c?void 0:c.currency,totalPrice:null===c||void 0===c?void 0:c.priceDifference},handleSubmit:P,onSubmit:M,submitDisabled:s,showPaymentButtons:!1,error:dt()(S)&&null===x?null:dt()(S)?x:B.lt,onFailure:function(e,t){return z(t)}})})]})}),(0,u.jsxs)(o.mz,{children:[(0,u.jsx)(o.zx,{onClick:a,variant:"secondary",marginRight:4,fontFamily:"body",disabled:s,"data-testid":"ChangeVehicle-button-cancel",children:"Cancel"}),(0,u.jsx)(mt.Z,{submitDisabled:s,styles:{width:32,overflow:"hidden",borderRadius:"1.25rem"},children:(0,u.jsx)(o.zx,{form:bt,type:"submit",variant:"primary",fontFamily:"body",disabled:s||!_,"data-testid":"ChangeVehicle-button-submit",onClick:R,children:"Submit"})})]})]})}))})};function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ct=function(e){var t=e.children,r=e.rateDiff,n=r.originalPrice,i=r.priceDifference,a=r.originalAmountCharged,s=r.originalCreditUsed,l=r.originalDiscountAmount,c=Math.abs(i),d=(0,ut.T4)(c).displayPrice,h=(0,ut.T4)(n-c).displayPrice,f=(0,ut.T4)(a).displayPrice,p=(0,ut.T4)(l).displayPrice,m=(0,ut.T4)(s).displayPrice;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.xu,{paddingX:3,paddingY:2,marginBottom:6,backgroundColor:"green.100",borderRadius:"md",children:(0,u.jsx)(o.xv,{lineHeight:"1.4",children:"Your new vehicle selection isn't oversized, so you'll be refunded the fee you've already paid."})}),(0,u.jsxs)(o.rj,{gap:2,width:"100%",templateColumns:"2fr 1fr",marginBottom:6,children:[(0,u.jsx)(o.xv,wt(wt({},Vt),{},{children:"Original Price:"})),(0,u.jsxs)(o.xv,wt(wt({justifySelf:"end"},Vt),{},{children:["$",h]})),(0,u.jsx)(o.xv,wt(wt({},Vt),{},{color:"black",children:"Oversize Fee:"})),(0,u.jsxs)(o.xv,wt(wt({justifySelf:"end"},Vt),{},{color:"black",children:["$",d]})),s>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.xv,wt(wt({},Vt),{},{children:"SpotHero Credit:"})),(0,u.jsxs)(o.xv,wt(wt({justifySelf:"end"},Vt),{},{children:["-$",m]}))]}),l>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.xv,wt(wt({},Vt),{},{children:"Promo Code:"})),(0,u.jsxs)(o.xv,wt(wt({justifySelf:"end"},Vt),{},{children:["-$",p]}))]}),(0,u.jsx)(o.iz,{gridColumn:"1/3",width:"100%",color:"gray.100"}),(0,u.jsx)(o.xv,wt(wt({},Vt),{},{children:"Total Previously Paid:"})),(0,u.jsxs)(o.xv,wt(wt({justifySelf:"end"},Vt),{},{children:["$",f]})),t]})]})},kt=r(92704),Pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,n.useMemo)((function(){if(!e)return t;if((null===e||void 0===e?void 0:e.wallet)===kt.Ph&&"paypalEmail"in e)return"Paypal ".concat(e.paypalEmail);if("type"in e){var r=(0,ut.lV)(e.type);return(0,u.jsxs)(u.Fragment,{children:[(0,gt.iS)(r),(0,u.jsx)("sup",{children:"*"}),e.last4]})}return t}),[e,t]);return r};function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Dt="Please choose where to send your refund",It=function(e){return e===Bt?{title:Dt}:{title:"Oops, we hit a snag issuing your refund",description:"Please try again."}},_t=function(e){var t=e.rateDiff,r=e.control,n=e.handleSubmit,i=e.error,a=e.onSubmit,s=e.errorMessageRef,l=e.refundCard,c=e.onFailure,d=(0,ut.T4)(t.refundAmount.charge).displayPrice,h=(0,ut.T4)(t.refundAmount.credit).displayPrice,f=Pt(l,Ft),p=It(null===i||void 0===i?void 0:i.message);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Ct,{rateDiff:t,children:[t.refundAmount.credit>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.xv,Tt(Tt({},Vt),{},{color:"success",fontWeight:"semibold",children:"SpotHero Credit to refund:"})),(0,u.jsxs)(o.xv,Tt(Tt({justifySelf:"end"},Vt),{},{fontWeight:"semibold",color:"success",children:["$",h]}))]}),(0,u.jsx)(o.xv,Tt(Tt({},Vt),{},{color:"success",fontWeight:"semibold",children:t.refundAmount.credit>0?"Remaining to refund:":"Amount to be refunded:"})),(0,u.jsxs)(o.xv,Tt(Tt({justifySelf:"end"},Vt),{},{color:"success",fontWeight:"semibold",children:["$",d]}))]}),(0,u.jsx)(o.iz,{width:"100%",color:"gray.100"}),(0,u.jsxs)(o.xu,{as:"form",sx:{".chakra-form-control":{paddingX:0,marginX:0,paddingTop:0},".chakra-form__label":{fontWeight:"semibold",color:"black",fontSize:"base",paddingTop:6,paddingBottom:4}},onSubmit:n(a,c),id:At,children:[(0,u.jsx)(_e.Qr,{name:zt,control:r,render:function(e){var t=e.field;return(0,u.jsxs)(o.FX,Tt(Tt({sx:{".chakra-radio__control":{marginTop:.5},".chakra-radio__label":{overflow:"hidden"},".chakra-stack div:not(:first-of-type)":{marginTop:3}},marginBottom:4,label:"Where should we send your refund?",id:zt},t),{},{children:[(0,u.jsxs)(Xe.Z,{isSelected:t.value===Mt,value:Mt,radioStyles:{paddingY:3,height:"auto"},children:[(0,u.jsx)(o.xv,{marginBottom:1,children:"SpotHero Credit"}),(0,u.jsx)(o.xv,{color:"text.secondary.light",children:"Credit will be issued immediately"})]}),(0,u.jsxs)(Xe.Z,{isSelected:t.value===Nt,value:Nt,radioStyles:{paddingY:3,height:"auto"},children:[(0,u.jsx)(o.xv,{marginBottom:1,children:f}),(0,u.jsx)(o.xv,{color:"text.secondary.light",children:"It may take 5\u201310 business days for the refund to appear on your account."})]})]}))}}),i?(0,u.jsx)(o.bZ,{ref:s,title:p.title,description:p.description,showIcon:!0,status:"error",size:"md"}):null]})]})};function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zt="refund",At="REFUND_FORM_ID",Mt="CREDIT_VALUE",Nt="ORIGINAL_PAYMENT_METHOD",Ft="Original Payment Method",Bt="NO_SELECTION_ERROR",Zt="GENERIC_ERROR",Vt={fontSize:"sm",lineHeight:"1.4",color:"text.secondary.light"},Ht=function(e){var t=e.reservation,r=e.user,i=e.onSuccess,a=e.onClose,s=e.isSubmitting,l=e.setIsSubmitting,c=e.rateDiff,d=e.vehicle,h=(0,_e.cI)(),f=h.register,p=h.control,m=h.handleSubmit,g=h.setError,v=h.formState.errors,x=(0,n.useRef)(null),b=(0,ut.T4)(c.refundAmount.charge).displayPrice,y=(0,ut.T4)(c.refundAmount.credit+c.refundAmount.charge).displayPrice,j=t.creditCard,O=(null===j||void 0===j?void 0:j.deleted)||0===c.refundAmount.charge,w=r.status===H.UserStatuses.GUEST,C=(0,Ee.Hc)().mutate,k=Q(),P=function(e){Me({reservation:t,priceDifference:c.priceDifference,oldVehicle:t.vehicle,newVehicle:d,view:ae,errors:e})},S=function(){var e=(0,We.Z)(Ye().mark((function e(n){var o,a,s;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.refund,l(!0),o){e.next=8;break}return P([{message:Dt}]),g(zt,{type:"custom",message:Bt}),(0,qe.B)(x),l(!1),e.abrupt("return");case 8:a={reservationId:t.rentalId,price:c.newTotalPrice,accessKey:t.accessKey,user:r,cardExternalId:null,refundAsCredit:o===Mt},"vehicleProfileId"in d?a.vehicleProfileId=d.vehicleProfileId:a.guestVehicle=d,s=t.vehicle,C(a,{onSuccess:function(){i({priceDifference:c.priceDifference,newVehicle:d,oldVehicle:s,view:ae})},onError:function(e){var t=(0,Ne.r)(e,"changing your vehicle");P(t),g(zt,{type:"custom",message:Zt}),(0,qe.B)(x)},onSettled:function(){l(!1)}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.fe,{flexDirection:"column",children:w?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.xu,{as:"form",onSubmit:m(S,(function(e){P(Object.values(e))})),id:At,children:(0,u.jsx)("input",Rt(Rt({},f(zt,{shouldUnregister:!0,value:Nt})),{},{type:"hidden"}))}),(0,u.jsxs)(Ct,{rateDiff:c,children:[(0,u.jsx)(o.xv,Rt(Rt({},Vt),{},{color:"success",fontWeight:"semibold",children:"Amount to be refunded:"})),(0,u.jsxs)(o.xv,Rt(Rt({},Vt),{},{justifySelf:"end",color:"success",fontWeight:"semibold",children:["$",b]}))]}),(0,u.jsx)(o.xv,{fontSize:"sm",color:"text.secondary.light",children:"Your refund will be sent to your original payment method. It typically takes 5-10 business days for it to appear on your payment method."})]}):O?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.xu,{as:"form",onSubmit:m(S,(function(e){P(Object.values(e))})),id:At,children:(0,u.jsx)("input",Rt(Rt({},f(zt,{shouldUnregister:!0,value:Mt})),{},{type:"hidden"}))}),(0,u.jsxs)(Ct,{rateDiff:c,children:[(0,u.jsx)(o.xv,Rt(Rt({marginTop:6},Vt),{},{color:"success",fontWeight:"semibold",children:"Fee refund to SpotHero Credit:"})),(0,u.jsxs)(o.xv,Rt(Rt({justifySelf:"end",marginTop:6},Vt),{},{fontWeight:"semibold",color:"success",children:["$",y]}))]})]}):(0,u.jsx)(_t,{rateDiff:c,control:p,handleSubmit:m,error:v[zt],onSubmit:S,onFailure:function(e){P(Object.values(e))},errorMessageRef:x,refundCard:j})}),(0,u.jsxs)(o.mz,{children:[(0,u.jsx)(o.zx,{onClick:a,variant:"secondary",marginRight:4,fontFamily:"body",disabled:s,"data-testid":"ChangeVehicle-button-cancel",children:"Cancel"}),(0,u.jsx)(o.zx,{form:At,type:"submit",variant:"primary",fontFamily:"body",disabled:s,"data-testid":"ChangeVehicle-button-submit",onClick:function(){k({clickTarget:"Refund Modal Submit",isReservationChange:!0})},children:"Submit"})]})]})},Wt=r(48510),Lt=function(e){var t=e.onClose;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.fe,{children:(0,u.jsx)(o.kC,{flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",children:(0,u.jsx)(o.aN,{"data-testid":"Loader",thickness:4,size:16})})}),(0,u.jsx)(o.mz,{children:(0,u.jsx)(o.zx,{onClick:t,variant:"secondary",marginRight:4,fontFamily:"body","data-testid":"ChangeVehicle-button-cancel",children:"Cancel"})})]})},Ut=function(e){var t=e.reservation,r=e.onClose,i=e.isOpen,a=(0,z.bT)().data,s=(0,n.useState)(ie),l=s[0],c=s[1],d=(0,n.useState)(null),h=d[0],f=d[1],p=(0,n.useState)(!1),m=p[0],g=p[1],v=Re({title:"Vehicle Updated"});(0,Wt.z)();var x=function(e){var n=e.priceDifference,i=void 0===n?0:n,o=e.oldVehicle,a=e.newVehicle,s=e.selectedPaymentMethod,l=e.view;X({reservation:t,updatedProperties:[Y],location:q,reservationPriceChanged:i}),Ae({reservation:t,priceDifference:i,oldVehicle:o,newVehicle:a,selectedPaymentMethod:s,view:l}),r(),v(),g(!1)};return(0,u.jsxs)(o.u_,{hasHeader:!0,hasFooter:!0,size:"md",isOpen:i,hideCloseButton:m,closeOnOverlayClick:!1,onClose:r,onCloseComplete:function(){c(ie),f(null)},children:[(0,u.jsx)(o.xB,{children:"Change Vehicle"}),l===ie&&(0,u.jsx)(lt,{reservation:t,user:a,onSuccess:x,onRateDiffResponse:function(e){var t=e.vehicle,r=e.rateDiff;r.priceDifference<0?(f({rateDiff:r,vehicle:t}),c(ae),g(!1)):r.priceDifference>0&&(f({rateDiff:r,vehicle:t}),c(oe),g(!1))},onClose:r,isSubmitting:m,setIsSubmitting:g}),l===oe&&(h?(0,u.jsx)(jt,{rateDiff:h.rateDiff,vehicle:h.vehicle,reservation:t,user:a,onSuccess:x,onClose:r,isSubmitting:m,setIsSubmitting:g}):(0,u.jsx)(Lt,{onClose:r})),l===ae&&(h?(0,u.jsx)(Ht,{rateDiff:h.rateDiff,vehicle:h.vehicle,reservation:t,user:a,onSuccess:x,onClose:r,isSubmitting:m,setIsSubmitting:g}):(0,u.jsx)(Lt,{onClose:r}))]})},Yt=function(e){var t,r=e.reservation,n=(0,xe.sm)(),i=n.state,o=n.dispatch,a=i[xe.oi],s=r.paymentStatus!==d.dn.REFUND&&r.activeStatus!==d.Fl.ENDED;if(!r.vehicleRequired||!s)return null;var l=function(){o((0,xe.$J)(xe.oi))};return!1===(null===(t=r.partner)||void 0===t?void 0:t.updateVehicleEnabled)?(0,u.jsx)(He,{reservation:r,onClose:l,isOpen:a}):(0,u.jsx)(Ut,{reservation:r,onClose:l,isOpen:a})},qt=r(25834);function Xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Gt=function(e){var t,r=e.reservation,i=(0,n.useState)(!1),a=i[0],s=i[1],l=function(){return s((function(e){return!e}))},c=be(),h=r.paymentStatus!==d.dn.REFUND&&r.activeStatus!==d.Fl.ENDED,f=Boolean(r.partner&&!1===(null===(t=r.partner)||void 0===t?void 0:t.updateVehicleEnabled));if(!r.vehicleRequired)return null;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.kC,{borderBottomWidth:"1px",borderColor:"gray.100",padding:4,justifyContent:"space-between",alignItems:"center",children:[(0,u.jsxs)(o.kC,{minWidth:0,children:[(0,u.jsx)(o.kC,{marginRight:2.5,children:(0,u.jsx)(he(),{loader:function(e){var t=e.src;return"".concat(t)},width:24,src:Ie,alt:"phone icon"})}),r.vehicle?(0,u.jsx)(qt.Z,{hideMakeModel:f,displayDescription:r.vehicle.displayDescription,plate:r.vehicle.licensePlateValue,styleProps:r.vehicle.licensePlateValue?{}:{color:"error"}}):(0,u.jsx)(o.xv,{color:"error",children:f?"Missing License Plate":"Missing Vehicle"})]}),h&&(r.enteredAndCantChange?(0,u.jsx)(o.zx,{color:"gray.dark",_hover:{color:"gray.dark"},sx:{"@media print":{display:"none"}},variant:"tertiary",whiteSpace:"nowrap",marginLeft:2,fontWeight:"semibold",fontFamily:"body","data-testid":"VehicleDetails-button-disabled-edit",onClick:l,children:r.vehicle||f?"Change":"Add Vehicle"}):(0,u.jsx)(o.zx,$t($t({},c),{},{sx:{"@media print":{display:"none"}},variant:"tertiary",whiteSpace:"nowrap",marginLeft:2,fontWeight:"semibold",fontFamily:"body","data-testid":"VehicleDetails-button-edit",children:r.vehicle||f?"Change":"Add Vehicle"})))]}),(0,u.jsxs)(o.u_,{hasHeader:!0,hasFooter:!0,size:"sm",isOpen:a,onClose:l,"data-testid":"VehicleDetails-modal-no-extensions-info",children:[(0,u.jsx)(o.xB,{fontSize:"lg",children:"No changes after entry"}),(0,u.jsx)(o.fe,{children:(0,u.jsxs)(o.xv,{children:[(0,u.jsx)("strong",{children:"Time & vehicle changes are not allowed at this facility after entry."})," ","You won't be refunded for leaving early and you may be charged extra if you leave late."]})}),(0,u.jsx)(o.mz,{children:(0,u.jsx)(o.zx,{onClick:l,variant:"primary",width:"100%",children:"Okay"})})]}),(0,u.jsx)(Yt,{reservation:r})]})},Kt=function(e){var t=e.handleTrackedClick,r=(0,n.useRef)(null);return[r,function(e){t({clickTarget:e,isReservationChange:!1}),(0,qe.B)(r)}]},Jt=r(14978),Qt=r.n(Jt);function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rr={padding:3,flex:"1",textAlign:"center",fontSize:"base",color:"text.secondary.light",borderTopWidth:"2px",borderTopColor:"gray.medium"},nr=tr(tr({},rr),{},{color:"text.link.light",borderTopColor:"text.link.light",fontWeight:"semibold"}),ir=function(e){var t=e.onToTopClick,r=e.onGettingThereClick,i=e.onInstructionsClick,a=e.parkingInstructionsRef,s=e.gettingThereRef,l=(0,m._)(),c=(0,n.useState)(ee),d=c[0],h=c[1];return(0,n.useEffect)((function(){if(l){var e=a.current?a.current.offsetTop:0,t=s.current?s.current.offsetTop:0,r=function(){var r=ee;window.scrollY>=e-100?r=re:window.scrollY>=t-100&&(r=te),h(r)};return window.addEventListener("scroll",Qt()(r,200)),function(){window.removeEventListener("scroll",Qt()(r,200))}}}),[a,s,l]),l?(0,u.jsxs)(o.kC,{backgroundColor:"white",position:"fixed",bottom:"0",width:"100%",zIndex:"layer6",children:[(0,u.jsx)(o.xu,tr(tr({},d===ee?nr:rr),{},{onClick:function(){return t('"Pass" on Mobile Nav')},children:"Pass"})),(0,u.jsx)(o.xu,tr(tr({},d===te?nr:rr),{},{onClick:function(){return r('"Details" on Mobile Nav')},children:"Details"})),(0,u.jsx)(o.xu,tr(tr({},d===re?nr:rr),{},{onClick:function(){return i('"How To" on Mobile Nav')},children:"How To"}))]}):null},or=function(e){var t=e.reservation,r=t.accessHours;return r&&0!==r.length?(0,u.jsxs)(S,{style:{alignItems:"flex-start"},children:[(0,u.jsx)(o.X6,{lineHeight:"1.4",as:"h3",fontSize:"base",marginBottom:2,children:"Location Access Hours"}),1===r.length&&"247"===r[0].type?(0,u.jsx)(o.xv,{lineHeight:"1.4",children:"This facility is open 24/7."}):r.map((function(e){return(0,u.jsxs)(o.xv,{width:"100%",display:"flex",justifyContent:"space-between",lineHeight:"1.4",children:[(0,u.jsx)(o.xu,{as:"span",className:"day",children:e.days}),(0,u.jsx)(o.xu,{textTransform:"capitalize",as:"span",children:e.value})]},"".concat(e.days).concat(e.value))})),t.accessHoursComment?(0,u.jsx)(o.xv,{lineHeight:"1.4",color:"text.secondary.light",marginTop:2,children:t.accessHoursComment}):null]}):null},ar=function(e){var t=e.reservation;return t.restrictions&&t.restrictions.length?(0,u.jsxs)(_,{children:[(0,u.jsx)(o.X6,{as:"h2",marginBottom:3,children:"Things You Should Know"}),(0,u.jsx)(o.aV,{children:t.restrictions.map((function(e){return(0,u.jsx)(o.HC,{borderBottomWidth:"1px",_last:{borderBottomWidth:0,paddingBottom:0},_first:{paddingTop:0},borderBottomColor:"gray.100",paddingY:4,marginBottom:0,children:(0,u.jsx)(o.xu,{as:"span",lineHeight:"1.4",fontSize:"base",color:e.includes("VIP")?"error":"black",dangerouslySetInnerHTML:{__html:e}})},e)}))})]}):null},sr=r(2878),lr=function(e){var t=e.images,r=e.alt,n=e.carouselHeight,i=e.carouselVariant,o=e.logoWidth,a=void 0===o?null:o,s=e.logoHeight,l=void 0===s?null:s,c=e.width,d=void 0===c?null:c,h=e.height,f=void 0===h?null:h,p=e.logos,g=void 0===p?[]:p,v=e.reinitializeCarousel,x=void 0!==v&&v,b=(0,m._)(),y=b?750:1024,j=b?512:704,O=n;O||(O=b?16:22);var w=t.map((function(e){return{src:(0,ut.IT)(e.urlTemplate,{WIDTH:d||y,HEIGHT:f||j,QUALITY:50}),alt:(null===e||void 0===e?void 0:e.alt)||r}})),C=g.map((function(e){return{src:(0,ut.IT)(e.urlTemplate,{WIDTH:a||165,HEIGHT:l||165,QUALITY:50}),alt:(null===e||void 0===e?void 0:e.alt)||r,isLogo:!0}}));return t.length+g.length<=0?null:(0,u.jsx)(sr.Z,{variant:i,images:[].concat((0,Le.Z)(C),(0,Le.Z)(w)),height:O,reinitialize:x})},cr=function(e){var t,r=e.reservation,n=(0,m._)();return(0,u.jsx)(lr,{carouselVariant:n?sr.M.SINGLE:sr.M.WIDE,images:r.facility.images,alt:r.facility.title,carouselHeight:n?16:17,logos:null===(t=r.airport)||void 0===t?void 0:t.logos})},dr=r(12139);function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fr="phone",pr=function(e){var t=e.reservation,r=e.isOpen,i=e.onClose,a=e.hidePhoneNumber,s=(0,_e.cI)({defaultValues:(0,C.Z)({},fr,a?"":t.phoneNumber)}),l=s.handleSubmit,c=s.formState.dirtyFields,h=s.reset,f=s.resetField,p=(0,Ee.dz)(),m=p.mutate,g=p.isLoading,v=(0,n.useState)(null),x=v[0],b=v[1],y=t.paymentStatus!==d.dn.REFUND&&t.activeStatus!==d.Fl.ENDED,j=Re({title:"Phone number updated"}),O=function(){i(),setTimeout((function(){h(),b(null)}),100)},w=function(){var e=(0,We.Z)(Ye().mark((function e(r){var n;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.phone,b(!1),e.next=4,m({phoneNumber:n,reservationId:t.rentalId,accessKey:t.accessKey},{onSuccess:function(){f(fr,{defaultValue:n}),X({reservation:t,updatedProperties:[L],location:q}),O(),j()},onError:function(){b(!0)}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!t.facility.phoneNumberRequired&&t.reservationType!==d.nc.MONTHLY||!y?null:(0,u.jsxs)(o.u_,{hasHeader:!0,hasFooter:!0,size:"sm",isOpen:r,onClose:O,children:[(0,u.jsx)(o.xB,{children:"Change Phone Number"}),(0,u.jsx)(o.fe,{children:(0,u.jsxs)(o.kC,{width:"100%",flexDirection:"column","data-testid":"ChangePhoneModal",children:[(0,u.jsx)(_e.RV,hr(hr({},s),{},{children:(0,u.jsx)("form",{onSubmit:l(w),id:"phone-form",children:(0,u.jsx)(dr.Z,{isDisabled:g,fieldName:fr})})})),x?(0,u.jsx)(o.bZ,{marginTop:4,status:"error",title:"Oops, we hit a snag saving your phone number. Please try again."}):null]})}),(0,u.jsxs)(o.mz,{children:[(0,u.jsx)(o.zx,{onClick:O,variant:"secondary",marginRight:4,fontFamily:"body",disabled:g,"data-testid":"ChangePhoneModal-cancel-button",children:"Cancel"}),(0,u.jsx)(o.zx,{form:"phone-form",type:"submit",variant:"primary",fontFamily:"body",disabled:g||!c.phone,"data-testid":"ChangePhoneModal-save-button",children:"Save"})]})]})},mr={src:"/consumer-checkout/_next/static/media/phone.39c08883.svg",height:24,width:24,blurWidth:0,blurHeight:0},gr=function(e){var t=e.reservation,r=(0,xe.sm)(),n=r.state,i=r.dispatch,a=(0,z.bT)().data,s=Q(),l=a.id,c=a.status,h=n[xe.dz],f=function(){i((0,xe.$J)(xe.dz))},p=t.paymentStatus!==d.dn.REFUND&&t.activeStatus!==d.Fl.ENDED;if(!t.facility.phoneNumberRequired&&t.reservationType!==d.nc.MONTHLY)return null;var m=c===H.UserStatuses.GUEST||!l||l!==t.renterId,g=null;return t.phoneNumber&&"string"===typeof t.phoneNumber&&""!==t.phoneNumber&&(g=m?"(XXX) XXX-".concat(t.phoneNumber.slice(-4)):(0,ut.un)(t.phoneNumber)),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.kC,{borderBottomWidth:"1px",borderColor:"gray.100",padding:4,justifyContent:"space-between",alignItems:"center","data-testid":"PhoneDetails",children:[(0,u.jsxs)(o.kC,{minWidth:0,children:[(0,u.jsx)(o.xu,{width:6,marginRight:2.5,color:"gray.dark",children:(0,u.jsx)(he(),{loader:function(e){var t=e.src;return"".concat(t)},width:24,src:mr,alt:"phone icon"})}),(0,u.jsx)(o.xv,{lineHeight:1.4,children:g||(0,u.jsx)(o.xu,{as:"span",color:"error",children:"Missing Phone Number"})})]}),p&&(0,u.jsx)(o.zx,{sx:{"@media print":{display:"none"}},onClick:function(){f(),s({clickTarget:"Change Phone Number",isReservationChange:!0})},variant:"tertiary",whiteSpace:"nowrap",marginLeft:2,fontWeight:"semibold",fontFamily:"body","data-testid":"PhoneDetails-cahnge-button",children:"Change"})]}),(0,u.jsx)(pr,{reservation:t,isOpen:h,onClose:f,hidePhoneNumber:m})]})};function vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var xr=function(){var e=(0,i.useRouter)(),t=(0,a.y)(e.query,"changeReservation"),r=(0,xe.sm)().dispatch;(0,n.useEffect)((function(){if(t){xe.fm.includes(t)&&r((0,xe.$J)(t));var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.query);delete n.changeReservation,e.replace({query:n},void 0,{shallow:!0})}}),[t,r,e])},br=function(e){var t=e.rentalId,r=e.phoneNumber,n=void 0===r?null:r,i=e.phoneNumberFormatted,a=void 0===i?null:i,s=Q(),l=Z.Z.tz("2022-07-29 6:00","America/Chicago").tz(Z.Z.tz.guess()).format("ha"),c=Z.Z.tz("2022-07-29 23:00","America/Chicago").tz(Z.Z.tz.guess()).format("ha z"),d=n||"1-844-243-7768",h=a||"(844) 243-7768";return(0,u.jsxs)(S,{"data-testid":"CallHeroes",style:{backgroundColor:"gray.light"},children:[(0,u.jsx)(o.X6,{marginBottom:2,fontSize:"base",as:"h3",children:"Questions?"}),(0,u.jsx)(o.xv,{marginBottom:3,children:"Our Customer Heroes are here to help!"}),(0,u.jsxs)(o.xv,{suppressHydrationWarning:!0,marginBottom:3,children:["Available daily, ",l," - ",c]}),(0,u.jsxs)(o.zx,{onClick:function(){return s({clickTarget:"Call Heroes",isReservationChange:!1})},cursor:"pointer",variant:"secondary",marginBottom:3,as:"a",href:"tel:".concat(d),"data-testid":"CallHeroes-call-button",children:["Call ",h]}),(0,u.jsxs)(o.xv,{fontWeight:"semibold","data-testid":"CallHeroes-text-rentalid",children:["Rental ID: ",t]})]})},yr=function(e){var t=e.reservation;return t.facility.oversizeSupported&&t.partner&&!t.partner.updateVehicleEnabled?(0,u.jsx)(o.xu,{padding:4,paddingTop:0,children:(0,u.jsx)(o.bZ,{status:"neutral",title:"Oversize fee charge onsite",description:"If you drive an oversize vehicle, additional fee might be charged on site by the parking facility.",showIcon:!0,color:"text.primary.light"})}):null},jr=function(e){var t=e.onClose;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.fe,{width:"100%",display:"flex",children:(0,u.jsx)(o.kC,{alignItems:"center",justifyContent:"center",width:"100%","data-testid":"CancelReservationLoading",children:(0,u.jsx)(o.aN,{thickness:3,size:12})})}),(0,u.jsx)(o.mz,{flexDirection:{base:"column-reverse",tablet:"row"},gap:4,children:(0,u.jsx)(o.zx,{onClick:t,variant:"secondary",fontFamily:"body",width:{base:"100%",tablet:"auto"},children:"Cancel"})})]})},Or=r(55831),wr=function(e){var t=e.onClose;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.fe,{width:"100%",display:"block",children:(0,u.jsxs)(o.kC,{alignItems:"center",flexFlow:"column",children:[(0,u.jsx)(o.xu,{position:"relative",width:24,height:24,marginBottom:6,children:(0,u.jsx)(he(),{fill:!0,loader:function(e){var t=e.src;return"".concat(t)},src:Or.Z,alt:"Ineligible for refund"})}),(0,u.jsx)(o.xv,{fontSize:"base",textAlign:"center",children:"Sorry, the reservation couldn't be cancelled."})]})}),(0,u.jsx)(o.mz,{flexDirection:{base:"column-reverse",tablet:"row"},gap:4,children:(0,u.jsx)(o.zx,{onClick:t,variant:"primary",fontFamily:"body",width:"100%",children:"Close"})})]})},Cr=r(44561);function kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Sr=[{pk:327,category:"Customer Issue",reason:"Found cheaper garage/lot parking",reasonDisplayedToCustomer:"Found cheaper garage/lot parking",reasonDisplayedToOperator:"Found cheaper garage/lot parking",type:"customer",reservationIsCancellableAfterStart:!1,reservationCancelAfterStartRequiresProof:!1,reservationCancelRequiresNoticeWithinThreshold:!1},{pk:326,category:"Customer Issue",reason:"Found street parking",reasonDisplayedToCustomer:"Found street parking",reasonDisplayedToOperator:"Found street parking",type:"customer",reservationIsCancellableAfterStart:!1,reservationCancelAfterStartRequiresProof:!1,reservationCancelRequiresNoticeWithinThreshold:!1},{pk:52,category:"Customer Issue",reason:"No longer need parking",reasonDisplayedToCustomer:"No longer need parking",reasonDisplayedToOperator:"No longer need parking",type:"customer",reservationIsCancellableAfterStart:!1,reservationCancelAfterStartRequiresProof:!1,reservationCancelRequiresNoticeWithinThreshold:!1},{pk:329,category:"Operator Issue",reason:"Couldn\u2019t redeem reservation",reasonDisplayedToCustomer:"Couldn\u2019t redeem reservation",reasonDisplayedToOperator:"Couldn\u2019t redeem reservation",type:"customer",reservationIsCancellableAfterStart:!1,reservationCancelAfterStartRequiresProof:!1,reservationCancelRequiresNoticeWithinThreshold:!1},{pk:227,category:"Operator Issue",reason:"Lot was full",reasonDisplayedToCustomer:"Lot was full",reasonDisplayedToOperator:"Lot was full",type:"customer",reservationIsCancellableAfterStart:!1,reservationCancelAfterStartRequiresProof:!1,reservationCancelRequiresNoticeWithinThreshold:!1},{pk:330,category:"Operator Issue",reason:"Turned away by attendant",reasonDisplayedToCustomer:"Turned away by attendant",reasonDisplayedToOperator:"Turned away by attendant",type:"customer",reservationIsCancellableAfterStart:!1,reservationCancelAfterStartRequiresProof:!1,reservationCancelRequiresNoticeWithinThreshold:!1},{pk:328,category:"SpotHero Issue",reason:"Couldn\u2019t find location",reasonDisplayedToCustomer:"Couldn\u2019t find location",reasonDisplayedToOperator:"Couldn\u2019t find location",type:"customer",reservationIsCancellableAfterStart:!1,reservationCancelAfterStartRequiresProof:!1,reservationCancelRequiresNoticeWithinThreshold:!1}],Tr="reason",Dr="reasonForm",Ir=function(e){var t=e.onClose,r=e.onSubmit,n=(0,_e.cI)(),i=n.control,a=n.handleSubmit,s=n.formState,l=s.isSubmitting,c=s.dirtyFields;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.fe,{width:"100%",display:"block",children:(0,u.jsx)(o.xu,{"data-testid":"RefundReasons",as:"form",sx:{".chakra-form-control":{paddingX:0,marginX:0,paddingTop:0},".chakra-form__label":{fontWeight:"semibold",color:"black",fontSize:"base",paddingBottom:4}},onSubmit:a((function(e){var t=e.reason;r({reason:t})})),id:Dr,children:(0,u.jsx)(_e.Qr,{name:Tr,control:i,render:function(e){var t=e.field;return(0,u.jsx)(o.FX,Pr(Pr({sx:{".chakra-radio__control":{marginTop:.5},".chakra-radio__label":{overflow:"hidden"},".chakra-stack div:not(:first-of-type)":{marginTop:3},".chakra-form__label":{color:"black"}},marginBottom:4,id:Tr,label:"Why are you cancelling?"},t),{},{children:Sr.map((function(e){return(0,u.jsx)(Cr.Z,{isSelected:t.value===e.reason,value:e.reason,radioStyles:{paddingY:3,height:"auto"},children:(0,u.jsx)(o.xv,{"data-testid":"RefundReasons-text-reason",children:e.reasonDisplayedToCustomer})},e.pk)}))}))}})})}),(0,u.jsxs)(o.mz,{flexDirection:{base:"column-reverse",tablet:"row"},gap:4,children:[(0,u.jsx)(o.zx,{onClick:t,variant:"secondary",fontFamily:"body",disabled:l,width:{base:"100%",tablet:"auto"},children:"Cancel"}),(0,u.jsx)(o.zx,{form:Dr,type:"submit",variant:"primary",fontFamily:"body",disabled:l||!c.reason,width:{base:"100%",tablet:"auto"},children:"Next"})]})]})};function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rr="SpotHero Credit",zr="Original Payment Method",Ar=function(e){var t=e.reservation,r=e.destinationSelectChoice,n=(e.user,e.register),i=e.control,a=t.spotheroCreditUsed,s=t.priceBreakdown.totalPrice,l=t.currencyType,c=t.creditCard,d=Pt(c,"Original Payment Method"),h=a>0&&a<s,f=t.partner?"It may take up to 21 business days to appear on payment accounts.":"It typically takes 5-10 business days for refunds to appear on your payment method.";return r===Hr?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",Er(Er({},n(Br,{shouldUnregister:!0,value:zr})),{},{type:"hidden"})),(0,u.jsxs)(o.xv,{fontSize:"sm",children:["Your refund will be sent to your original payment method."," ",f]})]}):r===Vr?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",Er(Er({},n(Br,{shouldUnregister:!0,value:Rr})),{},{type:"hidden"})),(0,u.jsx)(o.xv,{fontSize:"sm",children:"Your reservation was made using SpotHero Credit. Once you submit the cancellation, the credit will be added back to your account instantly."})]}):(0,u.jsxs)(u.Fragment,{children:[h&&(0,u.jsxs)(o.xu,{children:["The ",(0,ut.S_)(l),(0,ut.T4)(a).displayPrice," you paid in SpotHero Credit will be added back to your account."]}),(0,u.jsx)(_e.Qr,{name:Br,control:i,render:function(e){var t=e.field;return(0,u.jsxs)(o.FX,Er(Er({sx:{".chakra-radio__control":{marginTop:.5},".chakra-radio__label":{overflow:"hidden"},".chakra-stack div:not(:first-child)":{marginTop:3}},marginBottom:4,label:h?"Where should we send the rest of your refund?":"Where should we send your refund?",id:Br},t),{},{children:[(0,u.jsxs)(Cr.Z,{isSelected:t.value===Rr,value:Rr,radioStyles:{paddingY:3,height:"auto"},children:[(0,u.jsx)(o.xv,{"data-testid":"ReservationRefund-text-credit",marginBottom:1,children:"SpotHero Credit"}),(0,u.jsx)(o.xv,{color:"text.secondary.light",children:"Credit will be issued immediately"})]}),(0,u.jsxs)(Cr.Z,{isSelected:t.value===zr,value:zr,radioStyles:{paddingY:3,height:"auto"},children:[(0,u.jsx)(o.xv,{marginBottom:1,"data-testid":"ReservationRefund-text-original-payment",children:d}),(0,u.jsx)(o.xv,{color:"text.secondary.light",children:f})]})]}))}})]})};function Mr(e){var t=e.reservation,r=e.refundReason,n=e.refundDestination,i=e.errors;try{var o=t.reservationType,a=t.facility,s=t.rentalId,l=t.partner,c={parking_type:o,refund_destination:n,refund_reason:r,refund_amount:t.priceBreakdown.totalPrice,facility_id:a.id,rental_id:s,reservation_status:t.reservationStatus,partner:(null===l||void 0===l?void 0:l.slug)||null,errors:i.map((function(e){return e.message}))};F.ZP.track({event:"Cancellation Failed",properties:c,additionalOptions:{context:{protocols:{event_version:1}}}})}catch(u){var d=u;(0,B.X3)({error:d,errorMessage:"Segment Event Failed - cancellationFailed"})}}function Nr(e){var t=e.reservation,r=e.refundReason,n=e.refundDestination;try{var i=t.reservationType,o=t.facility,a=t.rentalId,s=t.partner,l={parking_type:i,refund_destination:n,refund_reason:r,refund_amount:t.priceBreakdown.totalPrice,facility_id:o.id,rental_id:a,reservation_status:t.reservationStatus,partner:(null===s||void 0===s?void 0:s.slug)||null};F.ZP.track({event:"Cancellation Request",properties:l,additionalOptions:{context:{protocols:{event_version:1}}}})}catch(d){var c=d;(0,B.X3)({error:c,errorMessage:"Segment Event Request - cancellationRequest"})}}function Fr(e){var t=e.reservation,r=e.refundReason,n=e.refundDestination;try{var i=t.reservationType,o=t.facility,a=t.rentalId,s=t.partner,l={parking_type:i,refund_destination:n,refund_reason:r,refund_amount:t.priceBreakdown.totalPrice,facility_id:o.id,rental_id:a,reservation_status:t.reservationStatus,partner:(null===s||void 0===s?void 0:s.slug)||null};F.ZP.track({event:"Reservation Refunded",properties:l,additionalOptions:{context:{protocols:{event_version:1}}}})}catch(d){var c=d;(0,B.X3)({error:c,errorMessage:"Segment Event Request - reservationRefunded"})}}var Br="destination",Zr="destinationForm",Vr="ONLY_CREDIT",Hr="ONLY_ORIGINAL_PAYMENT",Wr="USERS_CHOICE",Lr=function(e){var t=e.onClose,r=e.reservation,i=e.isSubmitting,a=e.destinationSelectChoice,s=e.user,l=e.setIsSubmitting,c=e.refundReason,d=(0,n.useState)(!1),h=d[0],f=d[1],p=(0,Ee.Wh)().mutate,m=Re({title:"Reservation cancelled"}),g=r.spotheroCreditUsed,v=r.priceBreakdown.totalPrice,x=g>0&&g<v,b=function(){var e=(0,We.Z)(Ye().mark((function e(n){var i,o;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.destination,l(!0),f(!1),Nr({reservation:r,refundReason:c,refundDestination:o=x&&i!==Rr?"Combination":i}),p({reservationId:r.rentalId,reason:c,accessKey:r.accessKey,refundAsCredit:i===Rr},{onSuccess:function(){t(),m(),Fr({reservation:r,refundReason:c,refundDestination:o})},onError:function(e){f(!0);var t=(0,Ne.r)(e,"cancelling your reservation");Mr({reservation:r,refundReason:c,refundDestination:o,errors:t})},onSettled:function(){l(!1)}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=(0,_e.cI)(),j=y.control,O=y.handleSubmit,w=y.formState.dirtyFields,C=y.register;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.fe,{width:"100%",display:"block",children:(0,u.jsx)(o.kC,{"data-testid":"ReservationRefund",width:"100%",flexDirection:"column",children:(0,u.jsxs)(o.xu,{as:"form",sx:{".chakra-form-control":{paddingX:0,marginX:0,paddingTop:0},".chakra-form__label":{fontWeight:"semibold",color:"black",fontSize:"base",paddingTop:6,paddingBottom:4}},onSubmit:O(b),id:Zr,children:[(0,u.jsx)(Ar,{register:C,control:j,reservation:r,user:s,destinationSelectChoice:a}),h?(0,u.jsx)(o.bZ,{title:"Oops, we hit a snag issuing your refund",description:"Please try again.",showIcon:!0,status:"error",size:"md",marginBottom:4}):null]})})}),(0,u.jsxs)(o.mz,{flexDirection:{base:"column-reverse",tablet:"row"},gap:4,children:[(0,u.jsx)(o.zx,{onClick:t,variant:"secondary",fontFamily:"body",disabled:i,width:{base:"100%",tablet:"auto"},children:"Cancel"}),(0,u.jsx)(o.zx,{form:Zr,type:"submit",variant:"primary",fontFamily:"body",disabled:i||a===Wr&&!w[Br],width:{base:"100%",tablet:"auto"},children:"Submit Cancellation"})]})]})},Ur="LOADING_VIEW",Yr="INELIGIBLE_VIEW",qr="REASON_SELECT_VIEW",Xr="REFUND_DESTINATION_VIEW",$r=function(e){var t=e.user,r=e.reservation,i=e.isOpen,a=e.handleToggleModal,s=(0,n.useState)(qr),l=s[0],c=s[1],h=(0,n.useState)(null),f=h[0],p=h[1],m=(0,n.useState)(null),g=(m[0],m[1]),v=(0,n.useState)(!1),x=v[0],b=v[1],y=r.spotheroCreditUsed,j=r.priceBreakdown.totalPrice,O=(0,Ee.Ih)({reservationId:r.rentalId,accessKey:r.accessKey}).mutate,w=(0,n.useCallback)((0,We.Z)(Ye().mark((function e(){return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(Ur),O(null,{onSuccess:function(e){e.originalSourceRefundEligible||e.creditOnlyRefundEligible?(g(e),c(qr)):c(Yr)},onError:function(){c(Yr)}});case 2:case"end":return e.stop()}}),e)}))),[O]);(0,n.useEffect)((function(){i&&w()}),[i,w]);var C=function(){a()};if(r.reservationType===d.nc.MONTHLY)return null;var k=Wr;return(null===t||void 0===t?void 0:t.status)!==H.UserStatuses.GUEST&&r.canRefundAsSpotheroCredit?y>0&&y===j&&(k=Vr):k=Hr,(0,u.jsxs)(o.u_,{hasHeader:!0,hasFooter:!0,size:l===Yr||l===Xr&&k!==Wr?"sm":"md",isOpen:i,onClose:C,onCloseComplete:function(){p(null),c(Ur),g(null),b(!1)},hideCloseButton:x,closeOnOverlayClick:!x,"data-testid":"CancelReservation-modal-cancel",children:[(0,u.jsx)(o.xB,{fontSize:"lg",children:l===Yr?null:"Cancellation Request"}),l===Ur&&(0,u.jsx)(jr,{onClose:C}),l===Yr&&(0,u.jsx)(wr,{onClose:C}),l===qr&&(0,u.jsx)(Ir,{onSubmit:function(e){var t=e.reason;p(t),c(Xr)},onClose:C}),l===Xr?f?(0,u.jsx)(Lr,{setIsSubmitting:b,onClose:C,user:t,reservation:r,isSubmitting:x,destinationSelectChoice:k,refundReason:f}):(0,u.jsx)(jr,{onClose:C}):null]})},Gr=function(e){var t=e.reservation,r=(0,n.useState)(!1),i=r[0],a=r[1],s=(0,xe.sm)(),l=s.state,c=s.dispatch,h=Q(),f=(0,z.bT)().data,p=null===f||void 0===f?void 0:f.admin,m=(0,N.Z)().siteUrl,g=("".concat(m,"/account-reservations#current-").concat(t.rentalId,"-change"),function(){c((0,xe.$J)(xe.Yq))}),v=(0,n.useMemo)((function(){var e=Z.Z.utc((0,Z.Z)()).tz(t.timezone);return(0,Z.Z)(t.starts).tz(t.timezone).subtract(t.cancellationMinutes,"minutes")<e}),[t.cancellationMinutes,t.timezone,t.starts]);if(v&&t.cancellationMinutes<=0||t.cancellationAllowed===d.Sf.NOT_ALLOWED||t.activeStatus!==d.Fl.NOT_STARTED||t.entryTimestamp||t.paymentStatus===d.dn.REFUND||t.cancellationAllowed===d.Sf.HERO&&!p||t.reservationType===d.nc.MONTHLY&&t.monthlyRecurring)return null;var x=Z.Z.duration(t.cancellationMinutes,"minutes").asHours(),b="".concat(Z.Z.duration(t.cancellationMinutes,"minutes").asHours()," ").concat((0,ut._6)(x,"hour","hours"));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.kC,{marginBottom:{base:5,tablet:4},justifyContent:"center",borderColor:"gray.100",borderTopWidth:"1px",paddingTop:{base:5,tablet:4},sx:{"@media print":{display:"none"}},children:[v?(0,u.jsx)(o.xv,{fontWeight:"normal",color:"gray.dark",width:"440px",px:4,children:"Unfortunately, your time to cancel the reservation has passed."}):(0,u.jsx)(o.zx,{onClick:function(){h({clickTarget:"Cancel Reservation",isReservationChange:!0}),g()},variant:"tertiary",fontWeight:"semibold",lineHeight:1.4,"data-testid":"CancelReservation-button-delete",children:"Request Cancellation"}),!v&&t.cancellationMinutes>0&&(0,u.jsx)(o.zx,{variant:"tertiary",paddingLeft:"1.5",color:"gray.dark",onClick:function(){return a(!0)},children:(0,u.jsx)(o.JO,{alt:"Info Circle Icon",as:O.kI,fontSize:"sm"})})]}),(0,u.jsx)($r,{user:f,reservation:t,handleToggleModal:g,isOpen:l[xe.Yq]}),(0,u.jsxs)(o.u_,{hasHeader:!0,hasFooter:!0,contentStyling:{width:"550px",minHeight:"330px",top:{desktop:"0",tablet:"0"}},isOpen:i,onClose:function(){return a(!1)},children:[(0,u.jsx)(o.xB,{fontSize:"lg",children:"Free Cancellation Policy"}),(0,u.jsx)(o.fe,{children:(0,u.jsxs)(o.xv,{children:[t.cancellationMinutes>0?"You have up to ".concat(b," before your"):"At this facility, you have up until the minute your"," ","reservation begins to cancel your parking for a full refund. You can cancel your reservation on the SpotHero website or app.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"If you're having trouble with your reservation and it's after the start time, please reach out to our Customer Heroes who are more than happy to help rectify any situation!"]})}),(0,u.jsx)(o.mz,{children:(0,u.jsx)(o.zx,{onClick:function(){return a(!1)},variant:"primary",children:"Okay"})})]})]})},Kr=r(4462);function Jr(e){var t=e.spotId,r=e.location,n=e.city,i=void 0===n?null:n,o=e.errorFetching,a=void 0!==o&&o;try{var s={partner_affiliate:Kr.default.get("sh-partner-affiliate","session")||null,facility_id:t,city:i,error_fetching:a,location:r};F.ZP.track({event:"Availability Error Thrown",properties:s,additionalOptions:{context:{protocols:{event_version:1}}}})}catch(l){(0,B.X3)({error:l,errorMessage:"Segment Event Failed - trackAvailabilityErrorThrown"})}}var Qr=r(31008),en=function(e){var t=e.reservation,r=e.initialStarts,i=e.initialEnds,a=e.updateStartsAndEnds,s=e.onCloseModal,l=e.handleRateDiff,c=t.accessKey,h=(0,n.useState)(r),f=h[0],p=h[1],m=(0,n.useState)(i),g=m[0],v=m[1],x=(0,n.useState)(!1),b=x[0],y=x[1],j=(0,n.useState)(!1),O=j[0],w=j[1],C=(0,n.useState)(!1),k=C[0],P=C[1],S=(0,z.bT)().data,T=((0,Qe.NL)(),(0,et.D)({mutationFn:function(e){var t=e.reservationId,r=e.startTimestamp,n=e.endTimestamp,i=e.accessKey;return(0,tt.k)({reservationId:t,startTimestamp:r,endTimestamp:n,accessKey:i})}})),D=T.mutate,I=function(){var e=(0,We.Z)(Ye().mark((function e(r){var n,i,o;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.starts,i=r.ends,y(!0),o={reservationId:t.rentalId,accessKey:c,startTimestamp:n,endTimestamp:i},D(o,{onSuccess:function(e){var r;e.available?(l(e),w(!1),y(!1)):(Jr({location:q,errorFetching:!1,spotId:t.facility.id,city:null===t||void 0===t||null===(r=t.city)||void 0===r?void 0:r.title}),w(!0),y(!1))},onError:function(e){var r;Jr({location:q,errorFetching:!0,spotId:t.facility.id,city:null===t||void 0===t||null===(r=t.city)||void 0===r?void 0:r.title}),(0,B.X3)({error:e,errorMessage:"Error Fetching Extension Rate Diff"}),w(!0),y(!1)}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=(0,n.useCallback)((function(e){var t=e.start,r=e.end;w(!1),P(!1),p(t.format(d.FI)),v(r.format(d.FI))}),[]),E=function(){var e=(0,We.Z)(Ye().mark((function e(){return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=2;break}return e.abrupt("return");case 2:if(!(0,Z.Z)(t.starts).tz(t.timezone).isSame(Z.Z.tz(f,t.timezone))||!(0,Z.Z)(t.ends).tz(t.timezone).isSame(Z.Z.tz(g,t.timezone))){e.next=5;break}return P(!0),e.abrupt("return");case 5:a({starts:f,ends:g}),I({starts:f,ends:g});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=Boolean(!S.admin&&(t.activeStatus!==d.Fl.NOT_STARTED||t.entryTimestamp||t.paymentStatus===d.dn.REFUND||t.reservationType===d.nc.MONTHLY));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.fe,{children:(0,u.jsxs)(o.kC,{width:"100%",direction:"column",backgroundColor:"white",marginX:"auto",sx:{".chakra-alert__title":{fontWeight:"semibold"},".FormElement-control .FormElement-item":{borderColor:O&&!b?"error":null},".DatePicker-input-container > span":{width:"100%"}},"data-testid":"ChangeTimesSelect",className:"ChangeTimesSelect",children:[(0,u.jsx)(Qr.Z,{timezone:t.timezone,starts:r,ends:i,isAdmin:S.admin,isStartReadOnly:R,onChange:_,isInLocalTime:!0}),O?(0,u.jsx)(o.bZ,{marginTop:4,status:"error",title:"Sorry, the selected times are unavailable"}):null,k?(0,u.jsx)(o.bZ,{marginTop:4,status:"error",title:"This is already your time slot",description:"Your selected dates and times are the same as your current reservation. Choose different dates or times before checking availability."}):null]})}),(0,u.jsxs)(o.mz,{justifyContent:"end",gap:4,flexDirection:{base:"column",desktop:"row-reverse"},children:[(0,u.jsx)(o.zx,{disabled:b,isLoading:b,onClick:E,loadingText:"Check Availability","data-testid":"ChangeTimesSelect-check-availability-button",width:{base:"100%",desktop:"auto"},children:"Check Availability"}),(0,u.jsx)(o.zx,{width:{base:"100%",desktop:"auto"},onClick:s,variant:"secondary",children:"Cancel"})]})]})};function tn(e){var t=(0,n.useRef)();return(0,n.useEffect)((function(){t.current=e}),[e]),t.current}var rn=function(e){var t=e.rateDiff,r=e.handleBackToTimeSelect,i=e.timezone,a=(0,n.useMemo)((function(){var e=(0,Z.Z)(t.starts).tz(i),r=(0,Z.Z)(t.ends).tz(i),n=e.format("MMMM D, h:mm A"),o=r.format("MMMM D, h:mm A");return e.isSame(r,"date")&&(o=r.format("h:mm A")),"".concat(n," - ").concat(o)}),[t.starts,t.ends,i]);return(0,u.jsxs)(o.kC,{flexDirection:"column",children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"New Times"}),(0,u.jsxs)(o.kC,{gap:2,children:[(0,u.jsx)(o.xv,{children:a}),(0,u.jsx)(o.zx,{"data-testid":"NewTimesDisplay-change-button",variant:"tertiary",onClick:function(){return r()},children:"Change"})]})]})};function nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var an="change_times_payment_form",sn=function(e){var t=e.reservation,r=e.rateDiff,i=e.starts,a=e.ends,s=e.user,l=e.isAutoExtension,c=e.isSubmitting,d=e.onCloseModal,h=e.handleBackToTimeSelect,f=e.onSuccess,p=e.setIsSubmitting,m=e.onError,g=(0,n.useState)(null),v=g[0],x=g[1],b=(0,n.useState)(!1),y=b[0],j=b[1],w=0===r.chargeAmount.charge,C=(0,Ee.tl)().mutate,k=(0,_e.cI)(),P=k.handleSubmit,S=k.formState.errors,T=k.watch,D=(0,ft.useStripe)(),I=(0,ft.useElements)(),_=T(ht.C9),E=(0,ut.T4)(r.chargeAmount.charge).displayPrice,R=(0,ut.T4)(r.chargeAmount.credit).displayPrice,z=function(e){var n=e.formVals,o=e.paymentRequest,l={reservationId:t.rentalId,accessKey:t.accessKey,formVals:n,user:s,rateDiff:r,starts:i,ends:a,paymentRequest:o};C(l,{onSuccess:function(){f({selectedPaymentMethod:n[ht.C9]})},onError:function(e){var t=(0,Ne.r)(e,"changing your reservation times");x({title:t[0].title||"",description:t[0].message||""}),m(t[0].message,n[ht.C9])}})},A=function(){var e=(0,We.Z)(Ye().mark((function e(t){var r,n,i,o;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.formVals,n=t.paymentRequest,x(null),p(!0),i=on({},r),r[ht.C9]!==gt.LM.CREDIT_CARD||r[ht.R2]!==ht.zo){e.next=11;break}return e.next=7,(0,ht.h1)({stripe:D,elements:I,name:r[ht.i1]||"",onError:function(e){e&&"validation_error"===e.type?(x(B.lt),m(B.lt.description,r[ht.C9])):(m("We couldn't charge your card.",r[ht.C9]),x({title:"We couldn't charge your card.",description:"Please refresh the page and try again."})),p(!1)}});case 7:if(o=e.sent){e.next=10;break}return e.abrupt("return");case 10:i[ht.MV]=o;case 11:z({formVals:i,paymentRequest:n});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){var t,r=null===(t=e.root)||void 0===t?void 0:t.message;if(!r&&!dt()(e))for(var n in e){var i;r=null===(i=e[n])||void 0===i?void 0:i.message}r||(r=""),m(r,_)},N=function(){var e=(0,We.Z)(Ye().mark((function e(t){var r,n,i;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.formVals,n=t.paymentRequest,p(!0),j(!1),i=on({},r),z({formVals:i,paymentRequest:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(_e.RV,on(on({},k),{},{children:(0,u.jsxs)(pt.bY,{children:[(0,u.jsxs)(o.fe,{flexDirection:"column","data-testid":"ChangeTimesPayment",children:[l&&(0,u.jsx)(o.bZ,{overflow:"visible",marginBottom:6,showIcon:!0,icon:O.SO,status:"neutral",description:"You're getting more time than you selected at no additional cost. Happy parking!"}),(0,u.jsx)(rn,{rateDiff:r,timezone:t.timezone,handleBackToTimeSelect:h}),r.chargeAmount.credit>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.kC,{marginTop:4,flexDirection:"column",children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"SpotHero Credit Applied"}),(0,u.jsxs)(o.xv,{children:["$",R]})]}),(0,u.jsxs)(o.kC,{marginTop:4,flexDirection:"column",children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"Remaining Payment Amount"}),(0,u.jsxs)(o.xv,{children:["$",E]})]})]}):(0,u.jsxs)(o.kC,{marginTop:4,flexDirection:"column",children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"Payment Due"}),(0,u.jsxs)(o.xv,{children:["$",E]})]}),w?null:(0,u.jsx)(o.xu,{marginTop:6,onSubmit:P((function(e){return A({formVals:e})}),M),"data-testid":"PaymentPicker",as:"form",noValidate:!0,id:an,children:(0,u.jsx)(ht.ZP,{user:s,priceBreakdown:{items:[{price:{value:null===r||void 0===r?void 0:r.priceDifference,currencyCode:null===r||void 0===r?void 0:r.currency},type:"extension",shortDescription:"Parking Extension",fullDescription:""}],currency:null===r||void 0===r?void 0:r.currency,totalPrice:null===r||void 0===r?void 0:r.priceDifference},handleSubmit:P,onSubmit:A,submitDisabled:c,showPaymentButtons:!1,error:dt()(S)&&null===v?null:dt()(S)?v:B.lt,onFailure:function(e,t){var r;return m((null===t||void 0===t||null===(r=t[0])||void 0===r?void 0:r.message)||"",_)}})}),y&&(0,u.jsx)(o.bZ,{title:"Oops, we hit a snag changing your reservation.",description:"Please try again.",showIcon:!0,status:"error",size:"md",marginBottom:4,marginTop:4})]}),(0,u.jsxs)(o.mz,{justifyContent:"end",gap:4,flexDirection:{base:"column",desktop:"row-reverse"},children:[w?(0,u.jsx)(o.zx,{loadingText:"Update Reservation","data-testid":"ChangeTimesPayment-update-reservation-button",width:{base:"100%",desktop:"auto"},onClick:P((function(e){return N({formVals:e})}),(function(e){j(!0),M(e)})),disabled:c,children:"Update Reservation"}):(0,u.jsx)(mt.Z,{submitDisabled:c,styles:{width:{base:"100%",desktop:32},overflow:"hidden",borderRadius:"1.25rem"},children:(0,u.jsx)(o.zx,{loadingText:"Update Reservation","data-testid":"ChangeTimesPayment-update-reservation-button",width:{base:"100%",desktop:"auto"},form:an,type:"submit",disabled:c||!_,children:"Update Reservation"})}),(0,u.jsx)(o.zx,{width:{base:"100%",desktop:"auto"},onClick:function(){return d()},variant:"secondary",children:"Cancel"})]})]})}))})},ln=function(e){var t=e.onClose;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.fe,{children:(0,u.jsx)(o.kC,{flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",children:(0,u.jsx)(o.aN,{"data-testid":"Loader",thickness:4,size:16})})}),(0,u.jsx)(o.mz,{children:(0,u.jsx)(o.zx,{onClick:t,variant:"secondary",marginRight:4,fontFamily:"body","data-testid":"ChangeTimes-button-cancel",children:"Cancel"})})]})},cn=r(14459);function dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var hn=function(e){var t=e.onCloseModal,r=e.handleBackToTimeSelect,i=e.rateDiff,a=e.starts,s=e.ends,l=e.user,c=e.isAutoExtension,d=e.reservation,h=e.onSuccess,f=e.setIsSubmitting,p=e.isSubmitting,m=e.onError,g=(0,n.useState)(!1),v=g[0],x=g[1],b=(0,n.useMemo)((function(){return(0,Z.Z)(a).tz(d.timezone)}),[a,d.timezone]),y=(0,n.useMemo)((function(){return(0,Z.Z)(s).tz(d.timezone)}),[s,d.timezone]),j=(0,Ee.tl)().mutate,w=function(){var e=(0,We.Z)(Ye().mark((function e(){var t;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!0),x(!1),t={reservationId:d.rentalId,accessKey:d.accessKey,user:l,rateDiff:i,starts:a,ends:s},!b.isSame((0,Z.Z)(i.starts).tz(d.timezone))||!y.isSame((0,Z.Z)(i.ends).tz(d.timezone))){e.next=6;break}return h({}),e.abrupt("return");case 6:j(t,{onSuccess:function(){h({})},onError:function(e){var t=(0,Ne.r)(e,"changing your reservation times");m(t[0].message),x(!0)}});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.fe,{flexDirection:"column","data-testid":"ChangeTimesNoCharge",children:[c&&(0,u.jsx)(o.bZ,{marginBottom:6,showIcon:!0,icon:O.XJ,status:"neutral",description:"You're getting more time than you selected at no additional cost. Happy parking!"}),(0,u.jsx)(rn,{rateDiff:i,timezone:d.timezone,handleBackToTimeSelect:r}),(0,u.jsxs)(o.kC,{marginTop:4,flexDirection:"column",children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"Payment Amount"}),(0,u.jsx)(o.xv,{children:"$0.00 (this one's on us!)"})]}),v&&(0,u.jsx)(o.bZ,{title:"Oops, we hit a snag changing your reservation.",description:"Please try again.",showIcon:!0,status:"error",size:"md",marginBottom:4,marginTop:4})]}),(0,u.jsxs)(o.mz,{justifyContent:"end",gap:4,flexDirection:{base:"column",desktop:"row-reverse"},children:[(0,u.jsx)(o.zx,{loadingText:"Update Reservation","data-testid":"ChangeTimesNoCharge-update-reservation-button",width:{base:"100%",desktop:"auto"},onClick:w,disabled:p,children:"Update Reservation"}),(0,u.jsx)(o.zx,{width:{base:"100%",desktop:"auto"},onClick:function(){return t()},variant:"secondary",children:"Cancel"})]})]})},fn=function(e){var t=e.refundAmount,r=e.onlyOriginalPaymentView,n=e.onlyCreditView,i=(0,ut.T4)(t.charge).displayPrice,a=(0,ut.T4)(t.credit).displayPrice;return r?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.kC,{marginTop:4,flexDirection:"column",children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"Refund Amount"}),(0,u.jsxs)(o.xv,{children:["$",i]})]}),(0,u.jsx)(o.xv,{marginTop:6,fontSize:"sm",children:"Your refund will be sent to your original payment method. It typically takes 5-10 business days for it to appear on your payment method."})]}):n?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.kC,{marginTop:4,flexDirection:"column",children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"Refund Amount"}),(0,u.jsxs)(o.xv,{children:["$",a]})]}),(0,u.jsx)(o.xv,{marginTop:6,fontSize:"sm",children:"This reservation was made using SpotHero credit, so your refund will be issued immediately as SpotHero credit."})]}):t.credit>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.kC,{marginTop:4,flexDirection:"column",children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"SpotHero Credit to Refund"}),(0,u.jsxs)(o.xv,{children:["$",a]})]}),(0,u.jsxs)(o.kC,{marginTop:4,flexDirection:"column",children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"Remaining to Refund"}),(0,u.jsxs)(o.xv,{children:["$",i]})]})]}):(0,u.jsxs)(o.kC,{marginTop:4,flexDirection:"column",children:[(0,u.jsx)(o.xv,{fontWeight:"semibold",fontSize:"sm",color:"text.secondary.light",children:"Refund Amount"}),(0,u.jsxs)(o.xv,{children:["$",i]})]})};function pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gn=function(e){var t=e.onCloseModal,r=e.handleBackToTimeSelect,i=e.rateDiff,a=e.starts,s=e.ends,l=e.user,c=e.isAutoExtension,d=e.reservation,h=e.onSuccess,f=e.setIsSubmitting,p=e.isSubmitting,m=e.onError,g=(0,_e.cI)(),v=g.register,x=g.control,b=g.handleSubmit,y=g.setError,j=g.formState.errors,w=(0,n.useRef)(null),C=i.refundAmount,k=(0,Ee.tl)().mutate,P=l.status===H.UserStatuses.GUEST,S=d.creditCard,T=Pt(S,Ft),D=(null===S||void 0===S?void 0:S.deleted)||0===i.refundAmount.charge,I=P||D,_=j[zt],E=It(null===_||void 0===_?void 0:_.message),R=function(){var e=(0,We.Z)(Ye().mark((function e(t){var r,n;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.refund,f(!0),r){e.next=7;break}return y(zt,{type:"custom",message:Bt}),(0,qe.B)(w),f(!1),e.abrupt("return");case 7:n={reservationId:d.rentalId,accessKey:d.accessKey,user:l,rateDiff:i,starts:a,ends:s,refundAsCredit:r===Mt,cardExternalId:null},k(n,{onSuccess:function(){h({refundAsCredit:r===Mt})},onError:function(e){var t=(0,Ne.r)(e,"changing your reservation times");y(zt,{type:"custom",message:Zt}),m(t[0].message)},onSettled:function(){f(!1)}});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.fe,{flexDirection:"column","data-testid":"ChangeTimesRefund",children:[c&&(0,u.jsx)(o.bZ,{marginBottom:6,showIcon:!0,icon:O.SO,status:"neutral",description:"You're getting more time than you selected at no additional cost. Happy parking!"}),(0,u.jsx)(rn,{rateDiff:i,timezone:d.timezone,handleBackToTimeSelect:r}),(0,u.jsx)(fn,{refundAmount:C,onlyOriginalPaymentView:P,onlyCreditView:D}),(0,u.jsxs)(o.xu,{as:"form",sx:{".chakra-form-control":{paddingX:0,marginX:0,paddingTop:0},".chakra-form__label":{fontWeight:"semibold",color:"black",fontSize:"base",paddingTop:6,paddingBottom:4}},onSubmit:b(R),id:At,children:[D&&!P?(0,u.jsx)("input",mn(mn({},v(zt,{shouldUnregister:!0,value:Mt})),{},{type:"hidden"})):null,P?(0,u.jsx)("input",mn(mn({},v(zt,{shouldUnregister:!0,value:Nt})),{},{type:"hidden"})):null,!I&&(0,u.jsx)(_e.Qr,{name:zt,control:x,render:function(e){var t=e.field;return(0,u.jsxs)(o.FX,mn(mn({sx:{".chakra-radio__control":{marginTop:.5},".chakra-radio__label":{overflow:"hidden"},".chakra-stack div:not(:first-child)":{marginTop:3}},marginBottom:4,label:"Where should we send your refund?",id:zt},t),{},{children:[(0,u.jsxs)(Cr.Z,{isSelected:t.value===Mt,value:Mt,radioStyles:{paddingY:3,height:"auto"},children:[(0,u.jsx)(o.xv,{marginBottom:1,"data-testid":"ChangeTimesRefund-text-credit",children:"SpotHero Credit"}),(0,u.jsx)(o.xv,{color:"text.secondary.light",children:"Credit will be issued immediately"})]}),(0,u.jsxs)(Cr.Z,{isSelected:t.value===Nt,value:Nt,radioStyles:{paddingY:3,height:"auto"},children:[(0,u.jsx)(o.xv,{marginBottom:1,"data-testid":"ChangeTimesRefund-text-original-payment",children:T}),(0,u.jsx)(o.xv,{color:"text.secondary.light",children:"It may take 5\u201310 business days for the refund to appear on your account."})]})]}))}})]}),_&&(0,u.jsx)(o.bZ,{marginTop:6,ref:w,title:E.title,description:E.description,showIcon:!0,status:"error",size:"md"})]}),(0,u.jsxs)(o.mz,{justifyContent:"end",gap:4,flexDirection:{base:"column",desktop:"row-reverse"},children:[(0,u.jsx)(o.zx,{loadingText:"Update Reservation","data-testid":"ChangeTimesRefund-update-reservation-button",width:{base:"100%",desktop:"auto"},disabled:p,form:At,type:"submit",children:"Update Reservation"}),(0,u.jsx)(o.zx,{width:{base:"100%",desktop:"auto"},onClick:function(){return t()},variant:"secondary",children:"Cancel"})]})]})},vn="TIME_SELECT_VIEW",xn="PAYMENT_VIEW",bn="REFUND_VIEW",yn="NO_PAYMENT_VIEW",jn=function(e){var t=e.reservation,r=e.canEditTimes,i=(0,xe.sm)(),a=i.state,s=i.dispatch,l=(0,z.bT)().data,c=(0,n.useState)(vn),h=c[0],f=c[1],p=a[xe.$n],m=(0,n.useState)(null),g=m[0],v=m[1],x=(0,n.useMemo)((function(){return(0,Z.Z)(t.starts).tz(t.timezone)}),[t.starts,t.timezone]),b=(0,n.useMemo)((function(){return(0,Z.Z)(t.ends).tz(t.timezone)}),[t.ends,t.timezone]),y=(0,n.useState)(x.format(d.FI)),j=y[0],O=y[1],w=(0,n.useState)(b.format(d.FI)),C=w[0],k=w[1],P=(0,n.useState)(!1),S=P[0],T=P[1],D=Re({title:"Reservation times updated"}),I=tn(x),_=tn(b);(0,n.useEffect)((function(){var e=x&&I&&!x.isSame(I),t=b&&_&&!b.isSame(_);(e||t)&&(O(x.format(d.FI)),k(b.format(d.FI)))}),[I,_,x,b]);var E=function(){s((0,xe.$J)(xe.$n))},R=function(e){var r=e.refundAsCredit,n=void 0!==r&&r,i=e.selectedPaymentMethod,o=void 0===i?null:i;if(T(!1),g){var a=(0,Z.Z)(t.ends).diff(t.starts,"minute"),s=(0,Z.Z)(g.ends).diff(g.starts,"minute");!function(e){try{var t=e.reservation,r=e.rateDiff,n=e.user,i=e.refundAsCredit,o=void 0!==i&&i,a=e.selectedPaymentMethod,s=t.reservationType,l=t.currencyType,c=t.rentalId,d=t.entryTimestamp,u=t.partner,h=t.parkingPassType,f=t.starts,p=t.ends,m=r.priceDifference,g=n.status,v=W({activeStatus:t.activeStatus,paymentStatus:t.paymentStatus}),x=(0,Z.Z)(r.starts).diff(f,"minute"),b=(0,Z.Z)(r.ends).diff(p,"minute"),y="moved";x>0&&b<=0||x>=0&&b<0?y="shortened":(x<0&&b>=0||x<=0&&b>0)&&(y="extended");var j=g===cn.g.USER||g===cn.g.ADMIN,O=j&&r.chargeAmount.credit>0,w=j&&r.refundAmount.credit>0,C="original payment";o?C="credit":w&&(C="combination");var k=un(un(un({},m>0&&{credit_applied:O}),m<0&&{refund_destination:C}),{},{adjustment:y,start_change:x,end_change:b,parking_type:s,scanned_in_time:d,reservation_status:v,partner:(null===u||void 0===u?void 0:u.slug)||null,currency:l.toLowerCase(),rental_id:c,price_difference:m,user_logged_in:j,parking_pass_type:h,payment_type:a?ze.A[a]:null});F.ZP.track({event:"Reservation Times Adjusted",properties:k,additionalOptions:{context:{protocols:{event_version:1}}}})}catch(P){(0,B.X3)({error:P,errorMessage:"Segment Event Failed - trackReservationTimesAdjusted"})}}({reservation:t,rateDiff:g,refundAsCredit:n,user:l,selectedPaymentMethod:o}),X({reservation:t,updatedProperties:[U],location:q,reservationPriceChanged:g.priceDifference,extraTimePurchased:s-a}),E(),D()}},A=function(e,r){T(!1),null!==g&&function(e){try{var t=e.reservation,r=e.rateDiff,n=e.user,i=e.errorMessage,o=e.selectedPaymentMethod,a=r.priceDifference,s=t.reservationType,l=t.currencyType,c=t.rentalId,d=t.entryTimestamp,u=t.partner,h=t.parkingPassType,f=t.starts,p=t.ends,m=n.status,g=W({activeStatus:t.activeStatus,paymentStatus:t.paymentStatus}),v=(0,Z.Z)(r.starts).diff(f,"minute"),x=(0,Z.Z)(r.ends).diff(p,"minute"),b="moved";v>0&&x<=0||v>=0&&x<0?b="shortened":(v<0&&x>=0||v<=0&&x>0)&&(b="extended");var y={error:i,adjustment:b,start_change:v,end_change:x,parking_type:s,scanned_in_time:d,reservation_status:g,partner:(null===u||void 0===u?void 0:u.slug)||null,currency:l.toLowerCase(),rental_id:c,price_difference:a,user_logged_in:m===cn.g.USER||m===cn.g.ADMIN,parking_pass_type:h,payment_type:o?ze.A[o]:null};F.ZP.track({event:"Reservation Times Adjustment Failed",properties:y,additionalOptions:{context:{protocols:{event_version:1}}}})}catch(j){(0,B.X3)({error:j,errorMessage:"Segment Event Failed - trackReservationTimesAdjustmentFailed"})}}({reservation:t,rateDiff:g,user:l,errorMessage:e,selectedPaymentMethod:r})},M=function(){f(vn),v(null)},N=(0,n.useMemo)((function(){if(g){var e=(0,Z.Z)(g.ends).tz(t.timezone),r=Z.Z.tz(C,t.timezone);return e.diff(r,"minute")>0}}),[g,C,t.timezone]);return r?(0,u.jsxs)(o.u_,{hasHeader:!0,hasFooter:!0,size:"sm",contentStyling:{height:{base:"100%",tablet:"auto"},maxHeight:{base:"100%",tablet:"65%"},minWidth:{base:"100%",tablet:96},maxWidth:{base:"100%",tablet:"55%",desktop:"42%",desktopXL:"30%"}},isOpen:p,onClose:E,onCloseComplete:function(){f(vn),v(null),O(x.format(d.FI)),k(b.format(d.FI))},closeOnOverlayClick:!1,"data-testid":"ChangeTimesModal",hideCloseButton:S,children:[(0,u.jsx)(o.xB,{fontSize:"lg",children:"Change reservation time"}),h===vn&&(0,u.jsx)(en,{onCloseModal:E,updateStartsAndEnds:function(e){var t=e.starts,r=e.ends;v(null),O(t),k(r)},initialStarts:j,initialEnds:C,reservation:t,handleRateDiff:function(e){v(e),e.priceDifference<0?f(bn):e.priceDifference>0?f(xn):f(yn)}}),h===xn&&(g?(0,u.jsx)(sn,{handleBackToTimeSelect:M,onCloseModal:E,rateDiff:g,starts:j,ends:C,user:l,isAutoExtension:N,isSubmitting:S,reservation:t,onSuccess:R,setIsSubmitting:T,onError:A}):(0,u.jsx)(ln,{onClose:E})),h===bn&&(g?(0,u.jsx)(gn,{handleBackToTimeSelect:M,onCloseModal:E,rateDiff:g,starts:j,ends:C,user:l,isAutoExtension:N,reservation:t,setIsSubmitting:T,isSubmitting:S,onSuccess:R,onError:A}):(0,u.jsx)(ln,{onClose:E})),h===yn&&(g?(0,u.jsx)(hn,{handleBackToTimeSelect:M,onCloseModal:E,rateDiff:g,starts:j,ends:C,user:l,isAutoExtension:N,reservation:t,onSuccess:R,isSubmitting:S,setIsSubmitting:T,onError:A}):(0,u.jsx)(ln,{onClose:E}))]}):null};function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?On(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Cn=function(e,t){var r=e.format("ddd, MMMM D"),n=r,i=Z.Z.utc((0,Z.Z)()).tz(t),o=i.add(1,"day");return e.isSame(i,"day")?n="Today":e.isSame(o,"day")&&(n="Tomorrow"),{default:n,print:r}},kn={flexDirection:"column",flex:1,alignItems:"start",padding:4},Pn={color:"text.secondary.light",fontSize:"sm",marginBottom:1,lineHeight:1.4},Sn={justifyContent:"center",borderBottomWidth:"1px",borderColor:"gray.100"},Tn={fontSize:{base:"lg",tablet:"xl"},fontWeight:{base:"bold",tablet:"semibold"},lineHeight:1.4},Dn={fontSize:"base",lineHeight:1.4},In={lineHeight:1.4,marginTop:1},_n={sx:{"@media print":{display:"none"}}},En={display:"none",sx:{"@media print":{display:"initial"}}},Rn=function(e){var t,r=e.reservation,i=(0,xe.sm)(),a=(i.state,i.dispatch),s=(0,n.useState)(!1),l=s[0],c=s[1],h=Q(),f=function(){return c((function(e){return!e}))},p=r.canUpdateStartsAndEnds,m=(0,n.useMemo)((function(){return(0,Z.Z)(r.ends).tz(r.timezone)}),[r.ends,r.timezone]),g=(0,n.useMemo)((function(){return(0,Z.Z)(r.starts).tz(r.timezone)}),[r.starts,r.timezone]),v=(0,n.useMemo)((function(){return g.format("h:mm A")}),[g]),x=(0,n.useMemo)((function(){return Cn(g,r.timezone)}),[g,r.timezone]),b=(0,n.useMemo)((function(){return m.format("h:mm A")}),[m]),y=(0,n.useMemo)((function(){return Cn(m,r.timezone)}),[m,r.timezone]),j=!r.partner||(null===(t=r.partner)||void 0===t?void 0:t.updateTimesEnabled),w=r.activeStatus!==d.Fl.ENDED&&r.paymentStatus!==d.dn.REFUND&&p&&j,C=r.activeStatus===d.Fl.NOT_STARTED&&r.paymentStatus!==d.dn.REFUND&&p&&j,k=function(){a((0,xe.$J)(xe.$n))},P=function(){h({clickTarget:"Change End Time",isReservationChange:!0}),k()};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.kC,wn(wn({},Sn),{},{children:[(0,u.jsxs)(o.kC,wn(wn({},kn),{},{children:[(0,u.jsx)(o.xv,wn(wn({},Pn),{},{children:"Enter After"})),(0,u.jsx)(o.xv,wn(wn({"data-testid":"start-time"},Tn),{},{children:v})),(0,u.jsx)(o.xv,wn(wn(wn({"data-testid":"start-date"},Dn),_n),{},{children:x.default})),(0,u.jsx)(o.xv,wn(wn(wn({},Dn),En),{},{children:x.print})),C&&(0,u.jsx)(o.zx,wn(wn(wn({},In),{},{as:"a",href:"#",onClick:function(){h({clickTarget:"Change Start Time",isReservationChange:!0}),k()},"data-testid":"start-time-edit-button",variant:"tertiary"},_n),{},{children:"Change"}))]})),(0,u.jsxs)(o.kC,wn(wn({borderLeftWidth:"1px",borderColor:"gray.100"},kn),{},{children:[(0,u.jsx)(o.xv,wn(wn({},Pn),{},{children:"Exit Before"})),(0,u.jsx)(o.xv,wn(wn({"data-testid":"end-time"},Tn),{},{children:b})),(0,u.jsx)(o.xv,wn(wn(wn({"data-testid":"end-date"},Dn),_n),{},{children:y.default})),(0,u.jsx)(o.xv,wn(wn(wn({},Dn),En),{},{children:y.print})),!p&&j&&(0,u.jsx)(o.zx,{variant:"tertiary",onClick:f,rightIcon:(0,u.jsx)(O.kI,{height:"18px",width:"18px"}),iconSpacing:1.5,textTransform:"auto",color:"text.secondary.light","data-testid":"DateTimeDetails-button-no-extensions-info",children:(0,u.jsx)(o.xv,{children:"No Extensions"})}),w&&(r.enteredAndCantChange?(0,u.jsx)(o.zx,wn(wn(wn({},In),{},{color:"gray.dark",_hover:{color:"gray.dark"},onClick:f,"data-testid":"end-time-disabled-edit-button",variant:"tertiary"},_n),{},{children:"Change"})):(0,u.jsx)(o.zx,wn(wn(wn({},In),{},{as:"a",href:"#",onClick:P,"data-testid":"end-time-edit-button",variant:"tertiary"},_n),{},{children:"Change"})))]}))]})),(0,u.jsxs)(o.u_,{hasHeader:!0,hasFooter:!0,size:"sm",isOpen:l,onClose:f,"data-testid":"DateTimeDetails-modal-no-extensions-info",children:[(0,u.jsx)(o.xB,{fontSize:"lg",children:r.enteredAndCantChange?"No changes after entry":"No extensions at this facility"}),(0,u.jsx)(o.fe,{children:(0,u.jsxs)(o.xv,{children:[(0,u.jsx)("strong",{children:r.enteredAndCantChange?"Time & vehicle changes are not allowed at this facility after entry.":"Time adjustments are not allowed at this facility after booking."})," ","You won't be refunded for leaving early and you may be charged extra if you leave late."]})}),(0,u.jsx)(o.mz,{children:(0,u.jsx)(o.zx,{onClick:f,variant:"primary",width:"100%",children:"Okay"})})]}),w?(0,u.jsx)(jn,{canEditTimes:w,reservation:r}):null]})},zn=r(14289);function An(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?An(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):An(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nn=function(e){var t=e.reservation,r=t.amenitiesFull,i=t.reservationType,a=t.monthlyInOutDetail,s=(0,n.useMemo)((function(){if(!r||null===r||void 0===r||!r.length)return[];var e=r.map((function(e){return Mn(Mn({},e),{},{icon:zn.default.getIcon(e.slug)})}));return i===d.nc.MONTHLY&&d.Eb[a.inOutAllowed]&&e.push({name:d.Eb[a.inOutAllowed],slug:"monthly_in_out",icon:zn.default.getIcon(d.An.IN_OUT)}),e}),[r,i,a]);return r&&null!==r&&void 0!==r&&r.length?(0,u.jsxs)(S,{style:{alignItems:"flex-start"},children:[(0,u.jsx)(o.X6,{as:"h3",fontSize:"base ",marginBottom:2,children:"Amenities"}),(0,u.jsx)(o.aV,{children:s.map((function(e){return(0,u.jsx)(o.HC,{marginBottom:2.5,_last:{marginBottom:0},children:(0,u.jsxs)(o.kC,{alignItems:"center",children:[(0,u.jsx)(o.JO,{width:"1.125rem",height:"auto",marginRight:3,as:e.icon}),(0,u.jsx)(o.xv,{lineHeight:"1.4",children:e.name})]})},e.slug)}))})]}):null},Fn=function(e){var t=e.reservation,r=t.priceBreakdown,i=t.discountAmount,a=t.spotheroCreditUsed,s=t.paymentStatus,l=t.facility.oversizeSupported,c=t.partner,h=r.totalPaid,f=r.totalPossibleRefund,p=r.totalPrice,m=r.items,g=function(e){return(0,ut.T4)(e).displayPrice},v=(0,n.useState)(!1),x=v[0],b=v[1],y=!1===(null===c||void 0===c?void 0:c.updateVehicleEnabled),j=(0,n.useMemo)((function(){return m.find((function(e){return e.shortDescription===d.eK}))}),[m]),w=l&&!j,C=m.filter((function(e){return e.isPromocodeEligible})),k=m.filter((function(e){return!e.isPromocodeEligible}));return(0,u.jsxs)(o.rj,{padding:4,gridTemplateColumns:"24px 1fr",gridGap:2,children:[(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.JO,{as:O.RF,width:6,height:"auto",marginRight:2.5,color:"gray.dark"})}),(0,u.jsx)(o.P4,{colStart:"2",colSpan:"1",justifyContent:"space-between",children:(0,u.jsxs)(o.rj,{gridTemplateColumns:"2fr 1fr",gridGap:x?2:0,sx:{"@media print":{gridGap:2}},transition:"grid-gap 150ms ease-out",children:[(0,u.jsx)(o.P4,{colStart:"1",colSpan:"2",justifyContent:"space-between",transition:"all 250ms ease-in-out",borderColor:"gray.medium","data-testid":"paymentdetails-accordion",maxHeight:x?80:0,borderBottomWidth:x?"1px":0,paddingBottom:x?2:0,overflow:x?"auto":"hidden",sx:{"@media print":{maxHeight:"none",borderBottomWidth:"1px",paddingBottom:2,overflow:"auto"}},children:(0,u.jsxs)(o.rj,{gridTemplateColumns:"repeat(2, 1fr)",gridGap:2,children:[C.map((function(e){return(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.xv,{children:e.shortDescription})}),(0,u.jsx)(o.P4,{colSpan:"1",textAlign:"right",children:(0,u.jsxs)(o.xv,{children:["$",g(e.price)]})})]},e.price)})),Boolean(i)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.xv,{children:"Promo Code"})}),(0,u.jsx)(o.P4,{colSpan:"1",textAlign:"right",children:(0,u.jsxs)(o.xv,{children:["\u2013$",g(i)]})})]}),k.map((function(e){return(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.xv,{children:e.shortDescription})}),(0,u.jsx)(o.P4,{colSpan:"1",textAlign:"right",children:(0,u.jsxs)(o.xv,{children:["$",g(e.price)]})})]},e.price)})),Boolean(a)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.xv,{children:"SpotHero Credit"})}),(0,u.jsx)(o.P4,{colSpan:"1",textAlign:"right",children:(0,u.jsxs)(o.xv,{children:["\u2013$",g(a)]})})]})]})}),(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.xv,{sx:{"@media print":{fontWeight:"semibold"}},fontWeight:x?"semibold":"normal",children:"Total Price"})}),(0,u.jsxs)(o.P4,{colSpan:"1",textAlign:"right","data-testid":"PaymentDetails-text-price",display:"flex",gap:2,alignItems:"center",justifyContent:"flex-end",children:[!x&&p!==h&&(0,u.jsxs)(o.xv,{textDecoration:"line-through",color:"text.secondary.light",children:["$",g(p)]}),(0,u.jsxs)(o.xv,{sx:{"@media print":{fontWeight:"semibold"}},fontWeight:x?"semibold":"normal",children:["$",g(h)]})]})]})}),s===d.dn.REFUND&&(0,u.jsxs)(o.P4,{colStart:"2",colSpan:"1",display:"flex",justifyContent:"space-between",children:[(0,u.jsx)(o.kC,{children:(0,u.jsx)(o.xv,{fontWeight:"semibold",color:"success",children:"Refunded"})}),(0,u.jsx)(o.kC,{children:(0,u.jsxs)(o.xv,{fontWeight:"semibold",color:"success",children:["$",g(f)]})})]}),j&&(0,u.jsx)(o.P4,{colSpan:"1",display:"flex",justifyContent:"center",children:(0,u.jsx)(o.JO,{width:4,height:"auto",as:O.Jr,color:"success"})}),(0,u.jsxs)(o.P4,{colStart:"2",colSpan:"1",display:"flex",justifyContent:"space-between",alignItems:"start",children:[(0,u.jsxs)(o.kC,{children:[j&&(0,u.jsx)(o.xv,{fontWeight:"semibold",color:"success",children:"Oversize Fee Paid"}),w&&!y&&(0,u.jsx)(o.xv,{fontSize:"sm",color:"gray.dark",paddingRight:"16",children:"This facility may charge oversize fees upon arrival."})]}),(0,u.jsx)(o.zx,{fontFamily:"body",variant:"tertiary",onClick:function(){return b((function(e){return!e}))},sx:{"@media print":{display:"none"}},children:x?"Less":"More"})]})]})},Bn=r(43422),Zn=function(e){return(0,Bn.useReactToPrint)({content:function(){return e.current},pageStyle:"\n    @media print {\n        body {\n            -webkit-print-color-adjust: exact;\n        }\n    }\n\n    @page {\n        size: auto;\n        margin: 5mm 4mm 5mm 4mm;\n    }\n    "})},Vn=function(e){var t=e.reservation,r=(0,n.useState)(!1),i=r[0],a=r[1],s=t.addOns,l=Q(),c=null===s||void 0===s?void 0:s.find((function(e){return e.type===H.CAR_PROTECTION_ADDON_TYPE}));if(!c)return null;var d=function(e){l({clickTarget:e,isReservationChange:!1})},h=function(){d(i?"Parked Car Protection Details Close":"Parked Car Protection Details"),a((function(e){return!e}))},f=c.context,p=f.faqLink,m=f.claimLink,g=f.phoneNumber,v=f.termsAndConditionsLink;return(0,u.jsxs)(o.rj,{borderBottomWidth:"1px",borderColor:"gray.100",padding:4,flexDirection:"column",columnGap:2,gap:0,gridTemplateColumns:"24px 1fr",children:[(0,u.jsx)(o.JO,{as:O.ST,width:6,height:"auto",color:"green"}),(0,u.jsxs)(o.kC,{alignItems:"center",justifyContent:"space-between",children:[(0,u.jsx)(o.xv,{lineHeight:1.4,color:"green",children:"Parked Car Protection"}),(0,u.jsx)(o.zx,{fontFamily:"body",variant:"tertiary",onClick:h,sx:{"@media print":{display:"none"}},children:"Details"})]}),(0,u.jsxs)(o.u_,{size:"sm",hasHeader:!0,isOpen:i,onClose:h,children:[(0,u.jsx)(o.xB,{children:"Parked Car Protection"}),(0,u.jsxs)(o.fe,{flexDirection:"column",children:[(0,u.jsx)(o.rU,{href:p,onClick:function(){return d("Parked Car Protection FAQ")},target:"_blank",rel:"noopener noreferrer",children:(0,u.jsx)(o.zx,{marginTop:1,marginBottom:4,width:"100%",variant:"secondary",children:"Read the FAQ"})}),(0,u.jsx)(o.rU,{href:m,onClick:function(){return d("Parked Car Protection File A Claim")},target:"_blank",rel:"noopener noreferrer",children:(0,u.jsx)(o.zx,{marginBottom:4,width:"100%",variant:"secondary",children:"File a Claim"})}),(0,u.jsx)(o.xv,{marginBottom:2,fontSize:"sm",lineHeight:"1.4",children:"Provided by our partner Park \u2019N\u2019 Protect."}),(0,u.jsxs)(o.xv,{marginBottom:4,fontSize:"sm",lineHeight:"1.4",children:["Questions? Call Park \u2019N\u2019 Protect at"," ",(0,u.jsx)(o.rU,{href:"tel:".concat(g),onClick:function(){return d("Parked Car Protection Contact Phone")},target:"_blank",rel:"noopener noreferrer",children:(0,ut.un)(g)}),"."]}),(0,u.jsxs)(o.xv,{fontSize:"xs",lineHeight:"1.4",children:["See applicable"," ",(0,u.jsx)(o.rU,{href:v,onClick:function(){return d("Parked Car Protection Terms and Conditions")},target:"_blank",rel:"noopener noreferrer",children:"Terms & Conditions"}),"."]})]})]})]})},Hn={src:"/consumer-checkout/_next/static/media/text-parking-pass.1005a6a8.svg",height:121,width:120,blurWidth:0,blurHeight:0},Wn=r(87298),Ln=function(e){var t=e.reservation,r=(0,m._)("desktop"),i=(0,n.useState)(!1),a=i[0],s=i[1],l=function(){s((function(e){return!e}))};return r?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.kC,{flexDirection:"row",alignItems:"stretch",width:"100%",marginX:"auto",maxWidth:"1120px",marginTop:10,paddingLeft:4,paddingRight:12,paddingY:5,boxShadow:"lg",children:[(0,u.jsxs)(o.xu,{flex:"1",children:[(0,u.jsx)(o.X6,{as:"h3",variant:"h4",marginBottom:2,children:"Take your parking pass on the go with the SpotHero app"}),(0,u.jsx)(o.xv,{fontSize:"sm",marginBottom:4,children:"Get easy access to your spot, and edit or extend your reservation in real-time."}),(0,u.jsx)(o.zx,{onClick:l,variant:"primary",children:"Open Parking Pass in the App"})]}),(0,u.jsx)(he(),{loader:function(e){var t=e.src;return"".concat(t)},width:120,src:Hn,alt:"SpotHero parking pass illustration"})]}),(0,u.jsx)(Wn.Z,{rentalId:t.rentalId,accessKey:t.accessKey,rentalPhone:t.phoneNumber,isOpen:a,onClose:l})]})},Un=function(e){var t,r,n=e.reservation,i=Q(),o=Kt({handleTrackedClick:i}),a=(0,c.Z)(o,2),s=a[0],l=a[1],d=Kt({handleTrackedClick:i}),m=(0,c.Z)(d,2),O=m[0],C=m[1],k=Kt({handleTrackedClick:i}),P=(0,c.Z)(k,2),S=P[0],T=P[1];return xr(),(0,u.jsxs)(D,{ref:S,children:[(0,u.jsx)(w,{}),(0,u.jsx)(j,{children:(0,u.jsx)(h,{reservation:n})}),(0,u.jsxs)(y,{children:[(0,u.jsxs)(b,{children:[(0,u.jsx)(De,{onPrintClick:Zn(S),onInstructionsClick:l,reservation:n}),(0,u.jsx)(x,{children:(0,u.jsxs)(v,{children:[(0,u.jsx)(Rn,{reservation:n}),(0,u.jsx)(Gt,{reservation:n}),(0,u.jsx)(Vn,{reservation:n}),(0,u.jsx)(gr,{reservation:n}),(0,u.jsx)(Fn,{reservation:n}),(0,u.jsx)(yr,{reservation:n}),(0,u.jsx)(Gr,{reservation:n})]})})]}),(0,u.jsx)(Ln,{reservation:n}),(0,u.jsx)(g,{children:(0,u.jsx)(cr,{reservation:n})}),(0,u.jsxs)(E,{children:[(0,u.jsxs)(p,{children:[(0,u.jsx)(_,{ref:O,children:(0,u.jsx)(ce,{facility:n.facility})}),(0,u.jsx)(ar,{reservation:n}),(0,u.jsx)(_,{ref:s,children:(0,u.jsx)(M,{instructions:n.redemptionInstructions})})]}),(0,u.jsxs)(f,{children:[(0,u.jsx)(or,{reservation:n}),(0,u.jsx)(Nn,{reservation:n}),(0,u.jsx)(br,{rentalId:n.rentalId,phoneNumber:null===(t=n.partner)||void 0===t?void 0:t.phoneNumber,phoneNumberFormatted:null===(r=n.partner)||void 0===r?void 0:r.phoneNumberFormatted}),(0,u.jsx)(A,{})]})]})]}),(0,u.jsx)(ir,{onGettingThereClick:C,onInstructionsClick:l,onToTopClick:T,parkingInstructionsRef:s,gettingThereRef:O})]})},Yn=function(e){var t=e.reservation,r=Q(),i=(0,z.bT)().data,a=null===i||void 0===i?void 0:i.admin,s=(0,N.Z)().siteUrl,l="".concat(s,"/account-reservations#current-").concat(t.rentalId,"-change");return(0,n.useMemo)((function(){var e=Z.Z.utc((0,Z.Z)()).tz(t.timezone);return(0,Z.Z)(t.starts).tz(t.timezone).subtract(t.cancellationMinutes,"minutes")<e}),[t.cancellationMinutes,t.timezone,t.starts])&&t.cancellationMinutes<=0||t.cancellationAllowed===d.Sf.NOT_ALLOWED||t.activeStatus!==d.Fl.NOT_STARTED||t.entryTimestamp||t.paymentStatus===d.dn.REFUND||t.cancellationAllowed===d.Sf.HERO&&!a||t.reservationType===d.nc.MONTHLY&&t.monthlyRecurring?null:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(o.kC,{marginBottom:{base:5,tablet:4},justifyContent:"center",paddingTop:{base:5,tablet:4},sx:{"@media print":{display:"none"}},children:(0,u.jsx)(o.zx,{onClick:function(){return r({clickTarget:"Cancel Reservation",isReservationChange:!0})},as:"a",href:l,variant:"tertiary",fontWeight:"semibold",lineHeight:1.4,"data-testid":"MonthlyCancelReservation-button-delete",children:"Request Cancellation"})})})};function qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $n={fontSize:{base:"lg",tablet:"xl"},fontWeight:"semibold",lineHeight:1.4},Gn=function(e){var t=e.reservation,r=(0,n.useMemo)((function(){return(0,Z.Z)(t.ends).tz(t.timezone)}),[t.ends,t.timezone]),i=(0,n.useMemo)((function(){return(0,Z.Z)(t.starts).tz(t.timezone)}),[t.starts,t.timezone]),a=(0,n.useMemo)((function(){return i.format("dddd,\nMMMM D")}),[i]),s=(0,n.useMemo)((function(){return r.format("dddd,\nMMMM D")}),[r]);return(0,u.jsxs)(o.kC,Xn(Xn({},Sn),{},{children:[(0,u.jsxs)(o.kC,Xn(Xn({},kn),{},{children:[(0,u.jsx)(o.xv,Xn(Xn({},Pn),{},{children:"Start Date"})),(0,u.jsx)(o.xv,Xn(Xn({whiteSpace:"pre-line","data-testid":"monthly-start-date"},$n),{},{children:a}))]})),(0,u.jsxs)(o.kC,Xn(Xn({borderLeftWidth:"1px",borderColor:"gray.100"},kn),{},{children:[(0,u.jsx)(o.xv,Xn(Xn({},Pn),{},{children:"End Date"})),(0,u.jsx)(o.xv,Xn(Xn({whiteSpace:"pre-line","data-testid":"monthly-end-date"},$n),{},{children:s}))]}))]}))},Kn=function(e){var t=e.reservation,r=t.priceBreakdown,i=t.discountAmount,a=t.spotheroCreditUsed,s=t.paymentStatus,l=t.rateTitle,c=t.facility,h=c.oversizeSupported,f=c.licensePlateRequired,p=r.totalPaid,m=r.totalPossibleRefund,g=r.totalPrice,v=r.items,x=function(e){return(0,ut.T4)(e).displayPrice},b=(0,n.useState)(!1),y=b[0],j=b[1],w=v.filter((function(e){return e.isPromocodeEligible})),C=v.filter((function(e){return!e.isPromocodeEligible}));return(0,u.jsxs)(o.rj,{padding:4,gridTemplateColumns:"24px 1fr",gridGap:2,children:[(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.JO,{as:O.RF,width:6,height:"auto",marginRight:2.5,color:"gray.dark"})}),(0,u.jsx)(o.P4,{colStart:"2",colSpan:"1",justifyContent:"space-between",children:(0,u.jsxs)(o.rj,{gridTemplateColumns:"repeat(2, 1fr)",gridGap:y?2:0,sx:{"@media print":{gridGap:2}},transition:"grid-gap 150ms ease-out",children:[(0,u.jsx)(o.P4,{colStart:"1",colSpan:"2",justifyContent:"space-between",transition:"all 250ms ease-in-out",borderColor:"gray.medium","data-testid":"paymentdetails-accordion",maxHeight:y?80:0,borderBottomWidth:y?"1px":0,paddingBottom:y?2:0,overflow:y?"auto":"hidden",sx:{"@media print":{maxHeight:"none",borderBottomWidth:"1px",paddingBottom:2,overflow:"auto"}},children:(0,u.jsxs)(o.rj,{gridTemplateColumns:"repeat(2, 1fr)",gridGap:2,children:[w.map((function(e){return(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.xv,{children:e.shortDescription})}),(0,u.jsx)(o.P4,{colSpan:"1",textAlign:"right",children:(0,u.jsxs)(o.xv,{children:["$",x(e.price)]})})]},e.price)})),Boolean(i)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.xv,{children:"Promo Code"})}),(0,u.jsx)(o.P4,{colSpan:"1",textAlign:"right",children:(0,u.jsxs)(o.xv,{children:["\u2013$",x(i)]})})]}),C.map((function(e){return(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.xv,{children:e.shortDescription})}),(0,u.jsx)(o.P4,{colSpan:"1",textAlign:"right",children:(0,u.jsxs)(o.xv,{children:["$",x(e.price)]})})]},e.price)})),Boolean(a)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.xv,{children:"SpotHero Credit"})}),(0,u.jsx)(o.P4,{colSpan:"1",textAlign:"right",children:(0,u.jsxs)(o.xv,{children:["\u2013$",x(a)]})})]})]})}),(0,u.jsx)(o.P4,{colSpan:"1",children:(0,u.jsx)(o.xv,{sx:{"@media print":{fontWeight:"semibold"}},fontWeight:y?"semibold":"normal",children:"Total Price"})}),(0,u.jsxs)(o.P4,{colSpan:"1",textAlign:"right","data-testid":"PaymentDetails-text-price",display:"flex",gap:2,alignItems:"center",justifyContent:"flex-end",children:[!y&&g!==p&&(0,u.jsxs)(o.xv,{textDecoration:"line-through",color:"text.secondary.light",children:["$",x(g)]}),(0,u.jsxs)(o.xv,{sx:{"@media print":{fontWeight:"semibold"}},fontWeight:y?"semibold":"normal",children:["$",x(p)]})]})]})}),s===d.dn.REFUND&&(0,u.jsxs)(o.P4,{colStart:"2",colSpan:"1",display:"flex",justifyContent:"space-between",children:[(0,u.jsx)(o.kC,{children:(0,u.jsx)(o.xv,{fontWeight:"semibold",color:"success",children:"Refunded"})}),(0,u.jsx)(o.kC,{children:(0,u.jsxs)(o.xv,{fontWeight:"semibold",color:"success",children:["$",x(m)]})})]}),(0,u.jsxs)(o.P4,{colStart:"2",colSpan:"1",display:"flex",justifyContent:"space-between",alignItems:"start",children:[(0,u.jsx)(o.kC,{children:(0,u.jsx)(o.xv,{fontSize:"sm",color:"text.secondary.light",lineHeight:"1.4",fontWeight:"semibold",paddingRight:4,children:l})}),(0,u.jsx)(o.zx,{fontFamily:"body",variant:"tertiary",onClick:function(){return j((function(e){return!e}))},sx:{"@media print":{display:"none"}},children:y?"Less":"More"})]}),(h||f)&&(0,u.jsx)(o.P4,{colStart:"2",colSpan:"1",display:"flex",justifyContent:"space-between",marginTop:1,children:(0,u.jsxs)(o.xv,{fontSize:"sm",color:"text.secondary.light",lineHeight:"1.4",fontWeight:"normal",borderColor:"gray.medium",borderTopWidth:"1px",paddingTop:3,children:["Please make sure that your rate matches your vehicle size or you may be charged an oversize fee at the facility. If you're not sure please reach out to our support at",(0,u.jsx)(o.rU,{href:"tel:1-844-243-7768",children:" (844) 243-7768"})]})})]})},Jn=function(e){var t=e.afterFirstMonthInstructions,r=void 0===t?[]:t;return r&&r.length?(0,u.jsxs)(_,{children:[(0,u.jsx)(o.X6,{id:"after-first-month-instructions",as:"h2",marginBottom:3,"data-testid":"MonthlyAfterFirstMonth-title",children:"After the First Month"}),(0,u.jsx)(o.kC,{direction:"column",gap:"4","data-testid":"MonthlyAfterFirstMonth-instructions",children:r.map((function(e,t){return(0,u.jsx)(o.xv,{children:e},t)}))})]}):null},Qn=function(e){var t,r,n=e.reservation,i=Q(),a=Kt({handleTrackedClick:i}),s=(0,c.Z)(a,2),l=s[0],d=s[1],m=Kt({handleTrackedClick:i}),O=(0,c.Z)(m,2),C=O[0],k=O[1],P=Kt({handleTrackedClick:i}),S=(0,c.Z)(P,2),T=S[0],I=S[1];return xr(),(0,u.jsxs)(D,{ref:T,children:[(0,u.jsx)(w,{}),(0,u.jsx)(j,{children:(0,u.jsx)(h,{reservation:n})}),(0,u.jsxs)(y,{children:[(0,u.jsxs)(b,{children:[(0,u.jsx)(De,{reservation:n,showRedemptionOnRefund:!0,onPrintClick:Zn(T),onInstructionsClick:d}),(0,u.jsx)(x,{children:(0,u.jsxs)(v,{children:[(0,u.jsx)(Gn,{reservation:n}),(0,u.jsx)(Gt,{reservation:n}),(0,u.jsx)(gr,{reservation:n}),(0,u.jsx)(Kn,{reservation:n}),(0,u.jsx)(yr,{reservation:n}),(0,u.jsx)(Yn,{reservation:n})]})})]}),(0,u.jsx)(g,{children:(0,u.jsx)(cr,{reservation:n})}),(0,u.jsxs)(E,{children:[(0,u.jsxs)(p,{children:[(0,u.jsx)(_,{ref:C,children:(0,u.jsx)(ce,{facility:n.facility})}),(0,u.jsx)(ar,{reservation:n}),(0,u.jsx)(_,{ref:l,children:(0,u.jsx)(M,{instructions:n.redemptionInstructions})}),(0,u.jsx)(Jn,{afterFirstMonthInstructions:n.afterFirstMonth}),Boolean(n.monthlyAgreementLink)&&(0,u.jsx)(o.xu,{children:(0,u.jsx)(o.zx,{as:"a",href:n.monthlyAgreementLink,children:"Download Application Form"})})]}),(0,u.jsxs)(f,{children:[(0,u.jsx)(or,{reservation:n}),(0,u.jsx)(Nn,{reservation:n}),(0,u.jsx)(br,{rentalId:n.rentalId,phoneNumber:null===(t=n.partner)||void 0===t?void 0:t.phoneNumber,phoneNumberFormatted:null===(r=n.partner)||void 0===r?void 0:r.phoneNumberFormatted}),(0,u.jsx)(A,{})]})]})]}),(0,u.jsx)(ir,{onGettingThereClick:k,onInstructionsClick:d,onToTopClick:I,parkingInstructionsRef:l,gettingThereRef:C})]})},ei={title:"Rideshare/taxi Information",content:"This is a rideshare or taxi location. You will have to arrange transport to and from this spot."},ti={title:"Public Transit Information",content:"This is a public transit location. You can get to and from the airport via public transit."},ri=function(e){var t,r,n,i,a,s,l=e.reservation,c=(0,m._)(),h=null===(t=l.airport)||void 0===t?void 0:t.shuttle,f=null===(r=l.airport)||void 0===r?void 0:r.details;if(!h)return null;var p=h.hours,g=h.fastFrequency,v=h.slowFrequency,x=h.contactPhoneNumber,b=h.duration,y=h.type,j=h.images,O=!!p&&(null===(n=p.text)||void 0===n?void 0:n.length)>0,w=O||Boolean(null===p||void 0===p||null===(i=p.periods)||void 0===i?void 0:i.length);if(y===d.yc.CURBSIDE_VALET)return null;if(y===d.yc.RIDE_SHARE||y===d.yc.PUBLIC_TRANSIT){var C=y===d.yc.RIDE_SHARE?ei:ti,k=C.title,P=C.content;return(0,u.jsxs)(S,{style:{alignItems:"flex-start",paddingBottom:"5"},children:[(0,u.jsx)(o.X6,{lineHeight:"1.4",as:"h3",fontSize:"base",marginBottom:2,children:k}),(0,u.jsx)(o.xv,{children:P})]})}return(0,u.jsxs)(S,{style:{alignItems:"flex-start"},children:[(0,u.jsx)(o.X6,{flexDirection:"column",fontSize:"base",marginBottom:2,fontWeight:"bold",children:"Shuttle Information"}),(0,u.jsxs)(o.kC,{flexDirection:"column",width:"100%",gap:"2",children:[Boolean(null===j||void 0===j?void 0:j.length)&&(0,u.jsx)(o.xu,{marginTop:"1",marginBottom:"3",sx:{".ImageCarousal-image-count":{left:"90%",top:"2",bottom:"initial"}},children:(0,u.jsx)(lr,{images:j,alt:"shuttle image",carouselHeight:c?15:13,carouselVariant:sr.M.SINGLE,logos:null===(a=l.airport)||void 0===a?void 0:a.logos})}),w&&(0,u.jsxs)(o.kC,{justifyContent:"space-between",direction:O?"row":"column",marginBottom:O?"0":"6",children:[(0,u.jsx)(o.X6,{as:"h5",children:"Hours"}),O?(0,u.jsx)(o.xv,{children:"24/7"}):null===p||void 0===p||null===(s=p.periods)||void 0===s?void 0:s.map((function(e,t){var r=e.startDow,n=e.endDow,i=e.startTime,a=e.endTime;return(0,u.jsxs)(o.kC,{width:"100%",justifyContent:"space-between",gap:"2.5",children:[(0,u.jsx)(o.xv,{children:r===n?r:"".concat(r," \u2013 ").concat(n)}),(0,u.jsx)(o.xv,{children:"".concat(i," \u2013 ").concat(a)})]},"".concat(t,"-").concat(r,"-").concat(n))}))]}),y?(0,u.jsxs)(o.kC,{justifyContent:"space-between",width:"100%",children:[(0,u.jsx)(o.X6,{as:"h5",children:"Frequency"}),y===d.yc.SCHEDULED?(0,u.jsx)(o.xv,{"data-testid":"ShuttleInformation-sheduled-frequency",children:g&&v?"Every ".concat(g," \u2013 ").concat(v," min"):g&&!v?"Every ".concat(g," min"):!g&&v?"Every ".concat(v," min"):""}):y===d.yc.ON_DEMAND?(0,u.jsx)(o.xv,{children:"On demand"}):""]}):"",b&&f?(0,u.jsxs)(o.kC,{justifyContent:"space-between",width:"100%",children:[(0,u.jsxs)(o.X6,{as:"h5",children:["Time to ",null===f||void 0===f?void 0:f.code]}),(0,u.jsxs)(o.xv,{children:[b," min"]})]}):"",x?(0,u.jsxs)(o.kC,{justifyContent:"space-between",width:"100%",children:[(0,u.jsx)(o.X6,{as:"h5",children:"Phone Number"}),(0,u.jsx)(o.rU,{href:"tel:".concat(x),fontSize:"base",children:(0,ut.un)(x)})]}):""]})]})},ni=function(e){var t,r,n,i,a=e.reservation,s=Q(),l=Kt({handleTrackedClick:s}),d=(0,c.Z)(l,2),m=d[0],O=d[1],C=Kt({handleTrackedClick:s}),k=(0,c.Z)(C,2),P=k[0],S=k[1],T=Kt({handleTrackedClick:s}),I=(0,c.Z)(T,2),R=I[0],z=I[1];return xr(),(0,u.jsxs)(D,{ref:R,children:[(0,u.jsx)(w,{}),(0,u.jsx)(j,{children:(0,u.jsx)(h,{reservation:a})}),(0,u.jsxs)(y,{children:[(0,u.jsxs)(b,{children:[(0,u.jsx)(De,{onPrintClick:Zn(R),onInstructionsClick:O,reservation:a}),(0,u.jsx)(x,{children:(0,u.jsxs)(v,{children:[(0,u.jsx)(Rn,{reservation:a}),(0,u.jsx)(Gt,{reservation:a}),(0,u.jsx)(Vn,{reservation:a}),(0,u.jsx)(gr,{reservation:a}),(0,u.jsx)(Fn,{reservation:a}),(0,u.jsx)(yr,{reservation:a}),(0,u.jsx)(Gr,{reservation:a})]})})]}),(0,u.jsx)(Ln,{reservation:a}),(0,u.jsx)(g,{children:(0,u.jsx)(cr,{reservation:a})}),(0,u.jsxs)(E,{children:[(0,u.jsxs)(p,{children:[(0,u.jsx)(_,{ref:P,children:(0,u.jsx)(ce,{facility:a.facility})}),(0,u.jsx)(ar,{reservation:a}),(0,u.jsxs)(_,{ref:m,children:[(0,u.jsx)(o.xu,{marginBottom:8,children:(0,u.jsx)(M,{instructions:(null===(t=a.airport)||void 0===t?void 0:t.arrivalInstructions)||[],subHeading:"Before you take off"})}),(0,u.jsx)(M,{instructions:(null===(r=a.airport)||void 0===r?void 0:r.departureInstructions)||[],subHeading:"Once you return",showHeading:!1})]})]}),(0,u.jsxs)(f,{children:[(0,u.jsx)(ri,{reservation:a}),(0,u.jsx)(or,{reservation:a}),(0,u.jsx)(Nn,{reservation:a}),(0,u.jsx)(br,{rentalId:a.rentalId,phoneNumber:null===(n=a.partner)||void 0===n?void 0:n.phoneNumber,phoneNumberFormatted:null===(i=a.partner)||void 0===i?void 0:i.phoneNumberFormatted}),(0,u.jsx)(A,{})]})]})]}),(0,u.jsx)(ir,{onGettingThereClick:S,onInstructionsClick:O,onToTopClick:z,parkingInstructionsRef:m,gettingThereRef:P})]})},ii=r(26064),oi=r(39226);function ai(e){var t=e.activeStatus;return e.paymentStatus===d.dn.REFUND?"cancelled":t===d.Fl.NOT_STARTED?"upcoming":t===d.Fl.ENDED?"past":t===d.Fl.ACTIVE?"active":null}function si(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function li(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?si(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):si(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ci=function(){var e=(0,i.useRouter)().query,t=(0,z.bT)().data,r=(0,a.y)(e,"id"),c=(0,l.Z)(),h=c.data,f=c.isLoading,p=c.isError,m=c.error,g=(0,n.useRef)(!1),v=f||!(null!==h&&void 0!==h&&h.rentalId);if((0,n.useEffect)((function(){!1===g.current&&null!==h&&void 0!==h&&h.rentalId&&(!function(e){var t=e.reservation,r=e.user;try{var n,i,o,a,s,l,c=(0,Z.Z)(),u=r.status,h=t.starts,f=t.ends,p=t.timezone,m=t.reservationType,g=t.city,v=t.facility,x=t.rentalId,b=t.entryTimestamp,y=t.exitTimestamp,j=m===d.nc.MONTHLY,O=(0,Z.Z)(h).tz(p),w=(0,Z.Z)(f).tz(p),C=ke({reservation:t}),k=C.showVehicleWarning,P=C.showParkingHint,S=li(li({city:g.slug,cannot_adjust_after_entry:!v.allowUpdatingReservationAfterEntry,parking_spot_id:v.id,parking_spot_name:v.title,parking_type:m,parking_pass_type:t.parkingPassType,redemption_type:t.redemptionType,rental_id:x,rental_lead_time:O.diff(c.tz(p),"minutes"),rental_length:j?null:w.diff(O,"minutes"),reservation_status:ai({activeStatus:t.activeStatus,paymentStatus:t.paymentStatus}),scanned_in_time:b,scanned_out_time:y,state:v.state,user_logged_in:u===H.UserStatuses.USER||u===H.UserStatuses.ADMIN},(0,V.Z)()),{},{license_plate_warning_shown:k,licence_plate_warning_title:(null===(n=t.facility.redemptionInfo)||void 0===n||null===(i=n.warning)||void 0===i?void 0:i.header)||null,licesne_plate_warning_message:(null===(o=t.facility.redemptionInfo)||void 0===o||null===(a=o.warning)||void 0===a?void 0:a.body)||null,parking_hint_shown:P,parking_hint_message:(null===(s=t.facility.redemptionInfo)||void 0===s||null===(l=s.parkingHint)||void 0===l?void 0:l.text)||null});F.ZP.page({name:"Parking Pass",properties:S})}catch(T){(0,B.X3)({error:T,errorMessage:"Segment Page Failed - trackParkingPassPage"})}}({reservation:h,user:t}),g.current=!0)}),[h,t]),p||!r)return(0,u.jsx)(o.xu,{as:"main",marginX:"auto",children:(0,u.jsx)(s.C,{item:"parking pass",errorType:(0,B.wq)(m,r)})});if(v)return(0,u.jsx)(ii.Z,{});switch(h.reservationType){case oi.nc.MONTHLY:return(0,u.jsx)(xe.GO,{children:(0,u.jsx)(Qn,{reservation:h})});case oi.nc.AIRPORT:return(0,u.jsx)(xe.GO,{children:(0,u.jsx)(ni,{reservation:h})});case oi.nc.TRANSIENT:default:return(0,u.jsx)(xe.GO,{children:(0,u.jsx)(Un,{reservation:h})})}}},55831:function(e,t){"use strict";t.Z={src:"/consumer-checkout/_next/static/media/detour.3404e63b.svg",height:120,width:120,blurWidth:0,blurHeight:0}},30117:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",fillRule:"evenodd",d:"M17 2a1 1 0 0 0-1 1v17H8v-9a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm3 2h-2v2h2zm-2 4h2v2h-2zM4 12h2v2H4zm14 0h2v2h-2z",clipRule:"evenodd"})))},c=n.forwardRef(l);e.exports=c},77529:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"m15 12 5-4-5-4v2.999H2v2h13zm7 3H9v-3l-5 4 5 4v-3h13z"})))},c=n.forwardRef(l);e.exports=c},40224:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a,s=i(n);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}var c=function(e,t){return s.createElement("svg",l({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=s.createElement("path",{fill:"",d:"M21.004 7.975V6c0-2.206-1.794-4-4-4h-10c-2.206 0-4 1.794-4 4v1.998l-.076.004A1 1 0 0 0 2 9v2a1 1 0 0 0 1 1h.004v6c0 .735.403 1.372.996 1.72V21a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1h10v1a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1.276A2 2 0 0 0 21.004 18v-6a1 1 0 0 0 1-1V9.062a1 1 0 0 0-.072-.455c-.203-.487-.635-.604-.928-.632M19.006 18H5.004v-5h14.001zM11.004 7v4h-6V7zm8 0v4h-6V7zm-12-3h10c.736 0 1.375.405 1.722 1H5.282c.347-.595.986-1 1.722-1"})),a||(a=s.createElement("path",{fill:"",d:"M7.5 17a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M16.5 17a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"})))},d=n.forwardRef(c);e.exports=d},35536:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"m20.772 13.155-1.368-4.104A2.995 2.995 0 0 0 16.559 7H7.441a2.995 2.995 0 0 0-2.845 2.051l-1.368 4.104A2 2 0 0 0 2 15v3c0 .738.404 1.376 1 1.723V21a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1h12v1a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1.277A1.99 1.99 0 0 0 22 18v-3c0-.831-.507-1.542-1.228-1.845M7.441 9h9.117a1 1 0 0 1 .949.684L18.613 13H5.387l1.105-3.316c.137-.409.519-.684.949-.684M5.5 18a1.5 1.5 0 1 1 .001-3.001A1.5 1.5 0 0 1 5.5 18m13 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3M9 4.378c.005-1.088-1.037-2.051-1.387-2.344a.176.176 0 0 0-.228 0C7.033 2.325 5.995 3.271 6 4.377 6 5.272 6.673 6 7.5 6S9 5.272 9 4.378m4.5 0c.005-1.088-1.037-2.052-1.387-2.344a.176.176 0 0 0-.228 0c-.353.291-1.391 1.238-1.386 2.344C10.5 5.272 11.173 6 12 6s1.5-.728 1.5-1.622m4.5 0c.005-1.088-1.037-2.052-1.387-2.344a.176.176 0 0 0-.228 0c-.352.291-1.39 1.237-1.385 2.343C15 5.272 15.673 6 16.5 6S18 5.272 18 4.378"})))},c=n.forwardRef(l);e.exports=c},24193:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"m20.772 10.155-1.368-4.104A2.995 2.995 0 0 0 16.559 4H7.441a2.995 2.995 0 0 0-2.845 2.051l-1.368 4.104A2 2 0 0 0 2 12v5c0 .738.404 1.376 1 1.723V21a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-2h12v2a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-2.277A1.99 1.99 0 0 0 22 17v-5a2 2 0 0 0-1.228-1.845M7.441 6h9.117c.431 0 .813.274.949.684L18.613 10H5.387l1.105-3.316A1 1 0 0 1 7.441 6M5.5 16a1.5 1.5 0 1 1 .001-3.001A1.5 1.5 0 0 1 5.5 16m13 0a1.5 1.5 0 1 1 .001-3.001A1.5 1.5 0 0 1 18.5 16"})))},c=n.forwardRef(l);e.exports=c},36354:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"m19.616 6.48.014-.017-4-3.24-1.26 1.554 2.067 1.674a2.99 2.99 0 0 0-1.394 3.062c.15.899.769 1.676 1.57 2.111.895.487 1.68.442 2.378.194L18.976 18a.995.995 0 0 1-1.708.705 1 1 0 0 1-.291-.705L17 16a2.98 2.98 0 0 0-.877-2.119A3 3 0 0 0 14 13h-1V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2v-4h1q.205 0 .391.078c.238.104.428.295.531.533A1 1 0 0 1 15 16l-.024 2c0 .406.079.799.236 1.168.151.359.368.68.641.951a2.97 2.97 0 0 0 2.123.881c.406 0 .798-.078 1.168-.236.358-.15.68-.367.951-.641A2.98 2.98 0 0 0 20.976 18L21 9a3 3 0 0 0-1.384-2.52M6 18l1-5H4l5-7-1 5h3zm12-8a1 1 0 1 1 0-2 1 1 0 0 1 0 2"})))},c=n.forwardRef(l);e.exports=c},32137:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",fillRule:"evenodd",d:"m19.928 8.652.009.028q.042.125.05.258.001.015.007.029A.1.1 0 0 1 20 9v9.586l1.71 1.71-1.414 1.414-18-18L3.71 2.296l.614.614A2 2 0 0 1 6 2h7q.017 0 .033.006.014.005.029.007a1 1 0 0 1 .259.051l.03.01q.033.01.064.023a1 1 0 0 1 .293.196l6 6a1 1 0 0 1 .22.359M6 4.586V4h6v5a1 1 0 0 0 1 1h5l.002 6.588zM14 8h2.586L14 5.414zM4 20V8.121l2 2V20h10l2 2H6c-1.103 0-2-.897-2-2",clipRule:"evenodd"})))},c=n.forwardRef(l);e.exports=c},37537:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"M16.5 8c0 1.5-.5 3.5-2.9 4.3.7-1.7.8-3.4.3-5-.7-2.1-3-3.7-4.6-4.6-.4-.3-1.1.1-1 .7 0 1.1-.3 2.7-2 4.4C4.1 10 3 12.3 3 14.5 3 17.4 5 21 9 21c-4-4-1-7.5-1-7.5.8 5.9 5 7.5 7 7.5 1.7 0 5-1.2 5-6.4 0-3.1-1.3-5.5-2.4-6.9-.3-.5-1-.2-1.1.3"})))},c=n.forwardRef(l);e.exports=c},46427:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"M3.433 17.325 3.079 19.8a1 1 0 0 0 1.131 1.131l2.475-.354C7.06 20.524 8 18 8 18s.472.405.665.466c.412.13.813-.274.948-.684L10 16.01s.577.292.786.335c.266.055.524-.109.707-.293a1 1 0 0 0 .241-.391L12 14.01s.675.187.906.214c.263.03.519-.104.707-.293l1.138-1.137a5.5 5.5 0 0 0 5.581-1.338 5.507 5.507 0 0 0 0-7.778 5.507 5.507 0 0 0-7.778 0 5.5 5.5 0 0 0-1.338 5.581l-7.501 7.5a1 1 0 0 0-.282.566M18.504 5.506a2.92 2.92 0 0 1 0 4.122l-4.122-4.122a2.92 2.92 0 0 1 4.122 0"})))},c=n.forwardRef(l);e.exports=c},32643:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"M20.98 11.802a1 1 0 0 0-.738-.771l-6.86-1.716 2.537-5.921A.998.998 0 0 0 14.981 2a1 1 0 0 0-.613.226l-11 9a1 1 0 0 0 .39 1.744l6.719 1.681-3.345 5.854A1.001 1.001 0 0 0 8.6 21.8l12-9a1 1 0 0 0 .38-.998"})))},c=n.forwardRef(l);e.exports=c},56519:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"M17 2H7c-1.103 0-2 .897-2 2v16c0 1.103.897 2 2 2h10c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2M7 16.999V5h10l.002 11.999z"})))},c=n.forwardRef(l);e.exports=c},31601:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"M11 2h2v5h-2zM11 9h2v5h-2zM11 16h2v6h-2zM18 2h2v20h-2zM4 2h2v20H4z"})))},c=n.forwardRef(l);e.exports=c},92549:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"M14 4.438A2.437 2.437 0 0 0 16.438 2h1.125A2.437 2.437 0 0 0 20 4.438v1.125A2.437 2.437 0 0 0 17.563 8h-1.125A2.437 2.437 0 0 0 14 5.563zM2 11a6 6 0 0 0 6-6h2a6 6 0 0 0 6 6v2a6 6 0 0 0-6 6H8a6 6 0 0 0-6-6zm3.876 1A8.04 8.04 0 0 1 9 15.124 8.04 8.04 0 0 1 12.124 12 8.04 8.04 0 0 1 9 8.876 8.04 8.04 0 0 1 5.876 12m11.374 2A3.25 3.25 0 0 1 14 17.25v1.5A3.25 3.25 0 0 1 17.25 22h1.5A3.25 3.25 0 0 1 22 18.75v-1.5A3.25 3.25 0 0 1 18.75 14z"})))},c=n.forwardRef(l);e.exports=c},53683:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a=i(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}var l=function(e,t){return a.createElement("svg",s({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=a.createElement("path",{fill:"",d:"M12 22a9.7 9.7 0 0 1-3.9-.788 10.1 10.1 0 0 1-3.175-2.137q-1.35-1.35-2.137-3.175A9.7 9.7 0 0 1 2 12q0-2.075.788-3.9a10.1 10.1 0 0 1 2.137-3.175q1.35-1.35 3.175-2.137A9.7 9.7 0 0 1 12 2q2.075 0 3.9.788a10.1 10.1 0 0 1 3.175 2.137q1.35 1.35 2.137 3.175A9.7 9.7 0 0 1 22 12a9.7 9.7 0 0 1-.788 3.9 10.1 10.1 0 0 1-2.137 3.175q-1.35 1.35-3.175 2.137A9.7 9.7 0 0 1 12 22m-1-2.1v-3q-1.5-.3-2.55-1.35T7.1 13h-3q.3 2.725 2.238 4.625T11 19.9m2 0q2.724-.3 4.663-2.237Q19.6 15.725 19.9 13h-3q-.3 1.5-1.35 2.55T13 16.9zM4.1 11H7l3-3h4l3 3h2.9q-.375-3.025-2.625-5.012Q15.025 4 12 4T6.725 5.987Q4.475 7.976 4.1 11"})))},c=n.forwardRef(l);e.exports=c},44107:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a,s=i(n);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}var c=function(e,t){return s.createElement("svg",l({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=s.createElement("path",{fill:"",d:"M12 10c1.151 0 2-.848 2-2s-.849-2-2-2c-1.15 0-2 .848-2 2s.85 2 2 2m0 1c-2.209 0-4 1.612-4 3.6v.386h8V14.6c0-1.988-1.791-3.6-4-3.6"})),a||(a=s.createElement("path",{fill:"",d:"M19 2H5c-1.103 0-2 .897-2 2v13c0 1.103.897 2 2 2h4l3 3 3-3h4c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2m-5 15-2 2-2-2H5V4h14l.002 13z"})))},d=n.forwardRef(c);e.exports=d},2230:function(e,t,r){"use strict";var n=r(52983);function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o,a,s=i(n);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}var c=function(e,t){return s.createElement("svg",l({},e,{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"Icon ".concat((null===e||void 0===e?void 0:e.className)||""),ref:t}),o||(o=s.createElement("path",{fill:"",d:"M9 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4M16.98 14.804A1 1 0 0 0 16 14h-4.133l-.429-3H16V9h-4.847l-.163-1.142A1 1 0 0 0 10 7H9a1.003 1.003 0 0 0-.99 1.142l.877 6.142A2.01 2.01 0 0 0 10.867 16h4.313l.839 4.196c.094.467.504.804.981.804h3v-2h-2.181z"})),a||(a=s.createElement("path",{fill:"",d:"M12.51 17.5c-.739 1.476-2.25 2.5-4.01 2.5A4.505 4.505 0 0 1 4 15.5a4.5 4.5 0 0 1 2.817-4.167l-.289-2.025C3.905 10.145 2 12.604 2 15.5 2 19.084 4.916 22 8.5 22a6.5 6.5 0 0 0 5.545-3.126l-.274-1.374z"})))},d=n.forwardRef(c);e.exports=d},14289:function(e,t,r){e.exports=r(64936)},64936:function(e,t,r){"use strict";var n=r(48412);t.default=void 0;var i=n(r(24193)),o=n(r(32643)),a=n(r(77529)),s=n(r(32137)),l=n(r(56519)),c=n(r(53683)),d=n(r(2230)),u=n(r(30117)),h=n(r(35536)),f=n(r(37537)),p=n(r(40224)),m=n(r(92549)),g=n(r(46427)),v=n(r(44107)),x=n(r(36354)),b=n(r(31601));const y={ICONS:{"alley-access":u.default,"car-wash":h.default,attendant:v.default,covered:i.default,"covered-parking":i.default,ev:x.default,heated:f.default,immediate_parking:o.default,"immediate-parking":o.default,in_out:a.default,"in-out":a.default,no_contract:s.default,"no-contract":s.default,one_tap:l.default,"one-tap":l.default,paved:b.default,self_park:c.default,"self-park":c.default,shuttle:p.default,touchless:m.default,valet:g.default,wheelchair:d.default,wheelchair_accessible:d.default},getIcon(e){const t=y.ICONS[e];return t||(console.warn(`There is no amenity icon available with the name '${e}'. Add it in fe-utils' AmenityUtils to use it.`),null)}};t.default=y}}]);